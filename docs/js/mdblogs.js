// Hje + MdBlogs
var Hje,__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))};!function(Hje){var BaseComponent=function(){function BaseComponent(element,options){var _this=this;this._inner={props:{},disposable:new Hje.DisposableArray,isDisposed:!1,data:void 0,refreshKeys:[],refreshToken:void 0},options||(options={});var self=this;"function"==typeof options.disposeFlagHandler&&options.disposeFlagHandler(function(){_this._inner.isDisposed=!0,_this._inner.disposable.dispose()}),this._inner.data=options.data,Hje.render(element,{},{onInit:function(c){self._context=c,"function"==typeof options.contextRef&&options.contextRef(c)}})}return Object.defineProperty(BaseComponent.prototype,"currentContext",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(BaseComponent.prototype,"currentModel",{get:function(){return this._context?this._context.model():void 0},set:function(value){this.childModel(null,value)},enumerable:!1,configurable:!0}),BaseComponent.prototype.childContext=function(key){return this._context.childContext(key)},BaseComponent.prototype.childControl=function(key){var c=this._context.childContext(key);return c?c.control():void 0},BaseComponent.prototype.childModel=function(key,value,clearOriginal){var context=this._context.childContext(key);if(context){var m=context.model();if(arguments.length<2||!m)return m;var change=!1;if(clearOriginal){for(var key_1 in change=!0,m)delete m[key_1];this.refreshChild(key,!0)}if(value){for(var key_2 in value)m[key_2]=value[key_2];return change||this.refreshChild(key,!0),value}}},Object.defineProperty(BaseComponent.prototype,"disposableStore",{get:function(){return this._inner.disposable},enumerable:!1,configurable:!0}),Object.defineProperty(BaseComponent.prototype,"data",{get:function(){return this._inner.data},enumerable:!1,configurable:!0}),BaseComponent.prototype.refreshChild=function(key,handler){var _this=this;if("boolean"!=typeof key){var context=this._context.childContext(key);if(context){var keys=this._inner.refreshKeys;if(keys.indexOf(key)<0&&keys.push(key),"function"==typeof handler)handler(context),this.refreshChild(!0);else if(!1===handler);else if(!0===handler){if(this._inner.refreshToken)return;this._inner.refreshToken=setTimeout(function(){_this.refreshChild(!0)})}else this.refreshChild(!0)}}else{if(!key)return;this._inner.refreshToken=void 0;var keys2=this._inner.refreshKeys;if(keys2.length<1)return;this._inner.refreshKeys=[];for(var i=0;i<keys2.length;i++){var key2=keys2[i],context2=this._context.childContext(key2);context2&&context2.refresh()}}},BaseComponent.prototype.childProps=function(childKey,propKey,v){var _this=this;if(propKey&&"boolean"!=typeof propKey){var h=Hje.viewGenerator(),context=this._context.childContext(childKey);if(context){if(arguments.length>2){var m=context.model();m.props||(m.props={}),m.props[propKey]=v,h.setProp(context,propKey,v)}if("string"==typeof propKey||"symbol"==typeof propKey||"number"==typeof propKey)return h.getProp(context,propKey.toString());var result={};if(propKey instanceof Array)return propKey.forEach(function(k){"string"!=typeof k&&"symbol"!=typeof k&&"number"!=typeof k||(result[k]=h.getProp(context,k.toString()))}),result;if("object"==typeof propKey)return Object.keys(propKey).forEach(function(k){result[k]=_this.childProps(childKey,k,propKey[k])}),result}}},BaseComponent.prototype.childModelData=function(childKey){var context=this.childContext(childKey);if(context){var m=context.model();if(m)return m.data}},BaseComponent.prototype.childStyle=function(childKey,style,styleRefs){var h=Hje.viewGenerator(),context=this._context.childContext(childKey);if(context&&!this._inner.isDisposed){if(arguments.length>2&&"boolean"!=typeof styleRefs)return styleRefs&&("function"==typeof styleRefs.subscribe&&(styleRefs.subscribe(function(nv){if(nv){if("string"==typeof nv)nv=[nv];else if(!(nv instanceof Array))return}else nv=[];h.setStyle(context,void 0,nv)}),"function"==typeof styleRefs.get&&(styleRefs=styleRefs.get())),"string"==typeof styleRefs?styleRefs=[styleRefs]:styleRefs instanceof Array||(styleRefs=[])),h.setStyle(context,style,styleRefs),h.getStyle(context);var styleInfo=h.getStyle(context);return styleInfo||(styleInfo={}),arguments.length>1?(!0===style?style=styleInfo.inline:!1===style?style=void 0:!0===styleRefs&&styleInfo.inline&&(style=__assign(__assign({},styleInfo.inline),style||{})),h.setStyle(context,style,styleInfo.refs),h.getStyle(context)):styleInfo}},BaseComponent.prototype.childStyleRefs=function(childKey,value){return this.childStyle(childKey,null,value)},Object.defineProperty(BaseComponent.prototype,"isDisposed",{get:function(){return this._inner.isDisposed},enumerable:!1,configurable:!0}),BaseComponent.prototype.pushDisposable=function(){for(var _a,items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return(_a=this._inner.disposable).push.apply(_a,items)},BaseComponent.prototype.removeDisposable=function(){for(var _a,items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return(_a=this._inner.disposable).remove.apply(_a,items)},BaseComponent.prototype.appendChild=function(childKey,model){var context=this.childContext(childKey);if(!context||!model)return!1;var m=context.model();if(!m)return!1;if(m.children){if(!(m.children instanceof Array))return!1;m.children.push(model)}else m.children=[model];var view=Hje.render(void 0,model);return Hje.viewGenerator().append(context.element(),view.element()),!0},BaseComponent.prototype.prop=function(key,value){var _this=this;if(0===arguments.length)return Object.keys(this._inner.props);if(key&&!this._inner.isDisposed){if("object"==typeof key){var obj_1={};if(!0===value){var oldKeys=Object.keys(this._inner.props),disposable_1=new Hje.DisposableArray;for(var i in oldKeys){var k=oldKeys[i];setProp(this._inner.props,k,void 0,disposable_1),obj_1[k]=void 0}disposable_1.count()>0&&setInterval(function(){disposable_1.dispose()},0)}Object.keys(key).forEach(function(k){setProp(_this._inner.props,k,key[k]),obj_1[k]=(_this._inner.props[k]||{}).value});var onPropsChanged=this.onPropsChanged;if(!1===onPropsChanged);else if(onPropsChanged&&!0!==onPropsChanged)"function"==typeof onPropsChanged?this.onPropsChanged(obj_1):"object"==typeof onPropsChanged&&Object.keys(obj_1).forEach(function(k){_this.onPropsChanged[k]&&("function"==typeof _this.onPropsChanged[k].set?_this.onPropsChanged[k].set(obj_1[k]):"function"==typeof _this.onPropsChanged[k].next?_this.onPropsChanged[k].next(obj_1[k]):"function"==typeof _this.onPropsChanged[k]&&_this.onPropsChanged[k](obj_1[k]))});else{var h_1=Hje.viewGenerator();Object.keys(obj_1).forEach(function(k){h_1.setProp(_this._context,k,obj_1[k])})}return Object.keys(key)}if(arguments.length>1&&setProp(this._inner.props,key,value)){var obj={};obj[key]=value,this.prop(obj)}return this._inner.props[key]}},BaseComponent.prototype.on=function(key,handler){var g=Hje.viewGenerator();if(!this._inner.isDisposed){var selfContext=this._context;if("function"!=typeof this.onListened)return g.on(selfContext,key,handler);this.onListened(key,handler,{onChild:function(childKey,eventKey,h){var context=selfContext.childContext(childKey);if(context){var c=context.control();if(!c)return g.on(context,eventKey,h);c.on(eventKey,h)}}})}},BaseComponent.prototype.style=function(value,refs){return this.childStyle(null,value,refs)},BaseComponent.prototype.styleRefs=function(value){return this.style(!0,value)},BaseComponent.prototype.childHasStyleRef=function(key,test){var context=this.childContext(key);return Hje.inArray(test,context.model().styleRefs)},BaseComponent.prototype.hasStyleRef=function(test){return this.childHasStyleRef(null,test)},BaseComponent.prototype.element=function(){return this._context.element()},BaseComponent.prototype.dispose=function(){if(!this._inner.isDisposed){this._inner.isDisposed=!0,this._inner.disposable.dispose(),"function"==typeof this.onUnmount&&this.onUnmount();var ele=this._context.element();if(ele)Hje.viewGenerator().unmount(ele)}},BaseComponent}();function setProp(props,key,value,disposable){if(!key||"string"!=typeof key)return!1;var ele=props[key];if(ele&&ele.value===value)return!1;if(void 0===value)delete props[key];else if(value)if("function"==typeof value.subscribe){var v=props[key]={};"function"==typeof value.get&&(v.value=value.get());var subscriber=value.subscribe(function(nv){setProp(props,key,nv,!1)});disposable instanceof Hje.DisposableArray&&disposable.push(subscriber)}else if("function"==typeof value.then){var noNeed_1=!1;value.then(function(nv){noNeed_1||setProp(props,key,nv,!1)}),disposable instanceof Hje.DisposableArray&&disposable.push({dispose:function(){noNeed_1=!0}})}else props[key]={value:value};else props[key]={value:value};return!ele||!1===disposable||("function"!=typeof ele.dispose||(disposable?!0===disposable?setTimeout(function(){ele.dispose()},0):disposable.push(ele):ele.dispose()),!0)}Hje.BaseComponent=BaseComponent}(Hje||(Hje={})),function(Hje){function removeFromList(list,item){if(!list)return 0;var removing=[];list.forEach(function(ele,eleIndex,eleArr){ele===item&&removing.push(eleIndex)});for(var count=removing.length,i=count-1;i--;i>=0)list.splice(removing[i],1);return count}var regs={};Hje.InternalInjectionPool={hittask:function(value){return function(key,value,validation){if(key){var needSet=!1;return"function"==typeof validation?validation(value)&&(needSet=!0):void 0!==value&&(needSet=!0),needSet&&(regs[key]=value),regs[key]}}("hittask",value,function(v){return"function"==typeof v})}};var DisposableArray=function(){function DisposableArray(){this._list=[]}return DisposableArray.prototype.push=function(){for(var _this=this,items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];var count=0;return items.forEach(function(item){!item||_this._list.indexOf(item)>=0||(item.dispose||"function"==typeof item.unsubscribe&&(item.dispose=item.unsubscribe),_this._list.push(item),"function"==typeof item.pushDisposable&&item.pushDisposable({dispose:function(){removeFromList(this._list,item)}}),count++)}),count},DisposableArray.prototype.pushDisposable=function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return this.push.apply(this,items)},DisposableArray.prototype.remove=function(){for(var _this=this,items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];var count=0;return items.forEach(function(item){item&&removeFromList(_this._list,item)<1||count++}),count},DisposableArray.prototype.removeDisposable=function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return this.remove.apply(this,items)},DisposableArray.prototype.count=function(){return this._list.length},DisposableArray.prototype.dispose=function(){var list=this._list;this._list=[],function(disposable){if(disposable){disposable instanceof Array||(disposable=[disposable]);var listFailed=[];disposable.forEach(function(item){if(item&&"function"==typeof item.dispose)try{item.dispose()}catch(ex){listFailed.push(item)}}),listFailed.forEach(function(item){item&&"function"==typeof item.dispose&&item.dispose()})}}(list)},DisposableArray}();Hje.DisposableArray=DisposableArray}(Hje||(Hje={})),function(Hje){Hje.toSpan=function toSpan(line,arr){if(!1!==line&&null!=line){if(!0===line){var m={tagName:"span"};return arr?[m]:m}if("number"==typeof line&&(line=line.toString(10)),"string"==typeof line){m={tagName:"span",children:line};return arr?[m]:m}if(line instanceof Array){for(var list=[],i=0;i<line.length;i++){(m=toSpan(line[i]))&&list.push(m)}return arr?list:{tagName:"span",children:list}}return arr?[line]:line}},Hje.appendChild=function(parent,tag){var ele=document.createElement(tag||"div");return(parent||document.body).appendChild(ele),ele},Hje.inArray=function(test,arr){if(!arr||null==test)return!1;if(arr===test)return!0;if(Array.isArray(arr))return arr.indexOf(test)>=0;if("function"==typeof arr.get){var v2=arr.get();if(v2===test)return!0;if(Array.isArray(v2))return v2.indexOf(test)>=0}return!1}}(Hje||(Hje={})),function(Hje){var HtmlGenerator=function(){function HtmlGenerator(){this.defaultTagName="div"}return HtmlGenerator.prototype.initView=function(context,tagName){var ele=context.element(),eleType=typeof ele;if(!ele||"symbol"===eleType||!0===ele){var tagNs=(context.model()||{}).tagNamespace;return!tagNs&&tagName&&tagName.indexOf(":")>=0&&(tagName.startsWith("svg:")?(tagNs="http://www.w3.org/2000/svg",(tagName=tagName.substring(4))||(tagName="svg")):tagName.startsWith("mathml:")?(tagNs="http://www.w3.org/1998/Math/MathML",(tagName=tagName.substring(7))||(tagName="math")):tagName.startsWith("math:")?(tagNs="http://www.w3.org/1998/Math/MathML",(tagName=tagName.substring(5))||(tagName="math")):tagName.startsWith("html:")?(tagNs="http://www.w3.org/1999/xhtml",tagName=tagName.substring(5)):tagName.startsWith("xbl:")?(tagNs="http://www.mozilla.org/xbl",tagName=tagName.substring(4)):tagName.startsWith("xul:")?(tagNs="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",tagName=tagName.substring(4)):tagName.startsWith(":")&&(tagName=tagName.substring(1))),tagNs?document.createElementNS(tagNs,tagName||this.defaultTagName||"div"):document.createElement(tagName||this.defaultTagName||"div")}return"string"===eleType?ele=document.getElementById(ele):"number"===eleType&&(ele=document.body.children[ele]),ele&&(ele.innerHTML=""),ele},HtmlGenerator.prototype.alive=function(element){if(!element||!element.parentElement)return!1;try{if(!element.parentElement.parentElement&&element!=document.body)return!1}catch(ex){}return!0},HtmlGenerator.prototype.unmount=function(element){element&&(element.innerHTML="",element.remove())},HtmlGenerator.prototype.append=function(parent,child){parent&&child&&parent.appendChild(child)},HtmlGenerator.prototype.setProp=function(context,key,value){var element=context.element();element&&(value&&"string"!=typeof value?element[key]=value:element.setAttribute(key,value))},HtmlGenerator.prototype.getProp=function(context,key){var element=context.element();if(element)return element[key]||element.getAttribute(key)},HtmlGenerator.prototype.setStyle=function(context,style,styleRefs){var element=context.element();if(element){if(style){for(var len=element.style.length,old=[],i=0;i<len;i++){var key=element.style.item(i);old.push(key)}for(i=0;i<old.length;i++){key=old[i];style[key]||element.style.removeProperty(key)}Object.keys(style).forEach(function(key){element.style[key]=style[key]})}styleRefs&&(element.className="string"!=typeof styleRefs?Array.prototype.join.call(styleRefs," "):styleRefs)}},HtmlGenerator.prototype.getStyle=function(context){var element=context.element(),result={inline:void 0,refs:[],computed:function(pseudoElt){return element?getComputedStyle(element,pseudoElt):void 0}};return element?(result.inline=element.style,result.refs=element.classList||(element.className||"").split(" "),result):result},HtmlGenerator.prototype.setTextValue=function(context,value){var element=context.element();element&&("input"!==element.tagName?(element.innerHTML="",element.appendChild(new Text(value))):element.value=value)},HtmlGenerator.prototype.bindProp=function(context,keys){keys.reg("value",function(setter){var element=context.element();element&&keys.on("change",function(ev){setter(element.value)})})},HtmlGenerator.prototype.onInit=function(context){},HtmlGenerator.prototype.on=function(context,key,handler){var element=context.element();if(element)return element.addEventListener?(element.addEventListener(key,handler,!1),{dispose:function(){element.removeEventListener(key,handler,!1)}}):element.attachEvent?(element.attachEvent("on"+key,handler),{dispose:function(){element.detachEvent&&element.detachEvent(key,handler,!1)}}):void 0},HtmlGenerator}();function readPropertyOfElement(props,element,key){var v=element[key];return!!v&&(props[key]=v,!0)}Hje.HtmlGenerator=HtmlGenerator,Hje.from=function from(element){if("string"==typeof element&&(element=document.getElementById(element)),null==element?void 0:element.tagName){var classNameStr=element.className,classNames=classNameStr&&"string"==typeof classNameStr?classNameStr.split(" ").filter(function(v){return!!v}):void 0,obj={tagName:element.tagName.toLowerCase(),props:{},styleRefs:classNames};readPropertyOfElement(obj.props,element,"hidden"),readPropertyOfElement(obj.props,element,"value"),readPropertyOfElement(obj.props,element,"type"),readPropertyOfElement(obj.props,element,"href"),readPropertyOfElement(obj.props,element,"title"),readPropertyOfElement(obj.props,element,"target"),readPropertyOfElement(obj.props,element,"alt"),readPropertyOfElement(obj.props,element,"src"),readPropertyOfElement(obj.props,element,"srcset"),readPropertyOfElement(obj.props,element,"dir"),readPropertyOfElement(obj.props,element,"accessKey"),readPropertyOfElement(obj.props,element,"placeholder"),readPropertyOfElement(obj.props,element,"inputMode"),readPropertyOfElement(obj.props,element,"lang");var data=element.dataset;Object.keys(data).length>0&&(obj.data=__assign({},data));var children=element.children;if(children&&children.length>0){obj.children=[];for(var i=0;i<children.length;i++)obj.children.push(from(children[i]))}else 1===element.childNodes.length&&element.childNodes[0].nodeType===Node.TEXT_NODE&&(obj.children=element.childNodes[0].textContent);return obj}}}(Hje||(Hje={})),function(Hje){var viewGen,htmlGen,inner={contextHandlers:{alive:function(){return!1},refresh:function(){}},controls:{}};function getHtmlGen(){return htmlGen||(htmlGen=new Hje.HtmlGenerator),htmlGen}function viewGenerator(h){if(arguments.length>0&&(h?function(h){if(!h||"function"!=typeof h.initView)return!1;"function"!=typeof h.alive&&(h.alive=function(e){return null!==e}),"function"!=typeof h.append&&(h.append=function(p,e){}),"function"!=typeof h.on&&(h.on=function(c,k,v){return{dispose:function(){}}}),"function"!=typeof h.onInit&&(h.onInit=function(c){}),"function"!=typeof h.setProp&&(h.setProp=function(c,k,v){}),"function"!=typeof h.setStyle&&(h.setStyle=function(c,s,r){}),"function"!=typeof h.setTextValue&&(h.setTextValue=function(c,v){}),"function"!=typeof h.unmount&&(h.unmount=function(e){e&&"function"==typeof e.dispose&&e.dispose()})}(h)&&(viewGen=h):viewGen=void 0),!viewGen)try{window.document&&(viewGen=getHtmlGen())}catch(ex){}return viewGen}function isObservable(value){return!!value&&"function"==typeof value.subscribe}function updateContext(h,bag,context,options,parent){var model=bag.model;options||(options={});var appendMode=options.appendMode;if(bag.element=h.initView(context,model.tagName),bag.element){var componentType=model.control||model.component;if("string"==typeof componentType&&(componentType=inner.controls[componentType]),"function"==typeof componentType){appendMode&&(options.parent&&h.append(options.parent,bag.element),appendMode=!1);var cc=bag.c=new componentType(bag.element,{data:model.data,children:model.children,disposeFlagHandler:function(h){"function"==typeof h&&context.pushDisposable({dispose:function(){h()}})}});return model.props&&"object"==typeof model.props&&bag.c.prop(model.props),bag.c.style(model.style,model.styleRefs||model.className),model.on&&"object"==typeof model.on&&Object.keys(model.on).forEach(function(key){if(key&&"string"==typeof key){var h=model.on[key];bag.c.on(key,h)}}),"function"==typeof cc.onInit&&cc.onInit(),h.onInit(context),"function"==typeof options.onInit&&options.onInit(context),"function"==typeof model.onInit&&model.onInit(context),"function"==typeof options.onLoad&&options.onLoad(context),"function"==typeof model.onLoad&&model.onLoad(context),bag.element}var props=model.props||model.attr||{},propsB=[];"object"==typeof props&&Object.keys(props).forEach(function(key){if(key&&"string"==typeof key){var v=props[key];if(v&&"string"!=typeof v&&"number"!=typeof v&&"boolean"!=typeof v&&"symbol"!=typeof v)if(isObservable(v)){propsB.push(key),"function"==typeof v.get&&h.setProp(context,key,v.get());var subscribe=v.subscribe(function(nv){context.alive()&&h.setProp(context,key,nv)});context.pushDisposable(subscribe)}else{if("function"==typeof v.then){var noNeed_2=!1;return v.then(function(nv){noNeed_2||h.setProp(context,key,nv)}),void context.pushDisposable({dispose:function(){noNeed_2=!0}})}v.source?"data"!==v.source||h.setProp(context,key,(model.data||{})[v.value]):h.setProp(context,key,v)}else h.setProp(context,key,v)}});var styleRefs=model.styleRefs||model.className;return styleRefs&&("function"==typeof styleRefs.subscribe&&(styleRefs.subscribe(function(nv){if(nv){if("string"==typeof nv)nv=[nv];else if(!(nv instanceof Array))return}else nv=[];h.setStyle(context,void 0,nv)}),"function"==typeof styleRefs.get&&(styleRefs=styleRefs.get())),"string"==typeof styleRefs?styleRefs=[styleRefs]:styleRefs instanceof Array||(styleRefs=[])),(model.style||styleRefs)&&h.setStyle(context,model.style,styleRefs),model.on&&"object"==typeof model.on&&Object.keys(model.on).forEach(function(key){var handler=model.on[key];if(handler)if("function"==typeof handler.process){var proc_1=handler.process;if(handler.options)try{var HitTask=Hje.InternalInjectionPool.hittask();if(HitTask){var task=new HitTask;task.setOptions(handler.options);var proc2_1=proc_1;task.pushHandler(function(){return proc2_1.call}),proc_1=task.process}}catch(ex){}h.on(context,key,function(ev){proc_1.call(handler.thisArg,ev,context)})}else"function"==typeof handler&&h.on(context,key,handler)}),propsB.length>0&&h.bindProp&&h.bindProp(context,{keys:function(){return propsB},length:function(){return propsB.length},get:function(key){return props[key]},reg:function(key,then){"function"==typeof then&&then(function(value){var obs=props[key];if(!isObservable(obs))return props[key]=obs,!1;if("function"==typeof obs.set)obs.set(value);else if("function"==typeof obs.next)obs.next(value);else{if("function"!=typeof obs)return!1;obs(value)}return!0})},contain:function(key){return Object.keys(props).indexOf(key)>=0},on:function(key,handler){h.on(context,key,handler)}}),appendMode&&options.parent&&h.append(options.parent,bag.element),h.onInit(context),"function"==typeof options.onInit&&options.onInit(context),"function"==typeof model.onInit&&model.onInit(context),model.children&&(model.children instanceof Array?model.children.forEach(function(child){child&&render(bag.element,child,{onInit:function(context2){var element=context2.element();element&&(h.append(bag.element,element),child.key&&"string"==typeof child.key&&(bag.keyRefs[child.key]=context2))},keyRefs:bag.keyRefs,appendMode:!0})}):"string"==typeof model.children?h.setTextValue(context,model.children):"number"==typeof model.children&&h.setTextValue(context,model.children.toString(10))),"function"==typeof model.onLoad&&model.onLoad(context),"function"==typeof options.onLoad&&options.onLoad(context),context.element()}}function getChildrenByTagName(model){for(var key=[],_i=1;_i<arguments.length;_i++)key[_i-1]=arguments[_i];if(model&&model.children){if(!key||!key.length)return model.children;if("string"!=typeof model.children&&"number"!=typeof model.children)return Array.prototype.some.call(model.children,function(ele){return key.indexOf(ele.tagName)>=0})}}function render(target,model,options){var h;if(arguments.length>3&&arguments[3]){var h2=arguments[3];"function"==typeof h2.initView&&"function"==typeof h2.alive&&(h=h2)}if(h||(h=viewGenerator()),model&&h){options?"string"==typeof options&&("html"===options.toLowerCase()&&(h=getHtmlGen()),options={}):options={};var appendMode=options.appendMode,inheritRefs=options.keyRefs&&"object"==typeof options.keyRefs,regKey=model.key;regKey&&"string"==typeof regKey||(regKey=void 0);var _a=function(element,model,assertElement,refresh){var disposable=new Hje.DisposableArray,handlers={},bag={element:element,keyRefs:{},inheritRefs:!1,model:model,info:{},c:void 0,dispose:function(){handlers=inner.contextHandlers,disposable.dispose()}},context={element:function(){return bag.element},model:function(){return bag.model},control:function(){return bag.c},pushDisposable:function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return disposable.push.apply(disposable,items)},removeDisposable:function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];return disposable.remove.apply(disposable,items)},info:function(key,value){return arguments.length>1&&(void 0===value?delete bag.info[key]:bag.info[key]=value),bag.info[key]},childContext:function(key){return key?"string"==typeof key?bag.keyRefs[key]:void 0:context},childModel:function(key){if("number"==typeof key){var children=bag.model.children;return children&&"string"!=typeof children&&"number"!=typeof children?children[key]:0===key?children:void 0}if(!key)return bag.model;if("string"==typeof key){var context=bag.keyRefs[key];if(context)return context.model()}},alive:function(){return handlers.alive()},refresh:function(){handlers.refresh()}};return handlers.alive=function(){return assertElement(bag,context)},handlers.refresh=function(){refresh(bag,context)},context.info.contain=function(key){return Object.keys(bag.info).indexOf(key)>=0},context.info.keys=function(){return Object.keys(bag.info)},context.childContext.contain=function(key){return Object.keys(bag.keyRefs).indexOf(key)>=0},context.childContext.keys=function(){return Object.keys(bag.keyRefs)},context.childContext.remove=function(key){if(key)if("string"!=typeof key&&"symbol"!=typeof key){if(key instanceof Array)for(var i in key){var s=key[i];s&&("string"!=typeof s&&"symbol"!=typeof s||delete bag.keyRefs[s])}}else delete bag.keyRefs[key]},context.childModel.prop=function(key,propKey){var m=context.childModel(key);if(m)return propKey?m.props?m.props[propKey]:void 0:m.props},context.childModel.style=function(key){var m=context.childModel(key);return m?m.style:void 0},context.childModel.styleRefs=function(key){var m=context.childModel(key);return m?m.styleRefs:void 0},context.childModel.data=function(key){var m=context.childModel(key);return m?m.data:void 0},context.childModel.children=function(key,index){var m=context.childModel(key);if(m){if("number"!=typeof index)return m.children;if(m.children&&m.children instanceof Array)return m.children[index]}},{context:context,bag:bag}}(appendMode?void 0:target,model,function(b){var element=b.element;return!!element&&(!!h.alive(element)||(delete b.element,b.c&&("function"==typeof b.c.onUnmount&&b.c.onUnmount(),delete b.c),b.info={},inheritRefs?regKey&&delete b.keyRefs[regKey]:b.keyRefs={},h.unmount(element),b.dispose(),!1))},function(b,c){updateContext(h,bag,c)}),context=_a.context,bag=_a.bag;return inheritRefs&&(bag.keyRefs=options.keyRefs,bag.inheritRefs=!0),regKey&&(bag.keyRefs[regKey]=context),updateContext(h,bag,context,options),context}}Hje.viewGenerator=viewGenerator,Hje.getChildrenByTagName=getChildrenByTagName,Hje.getChildByTagName=function(model){for(var key=[],_i=1;_i<arguments.length;_i++)key[_i-1]=arguments[_i];var c=getChildrenByTagName.apply(void 0,__spreadArray([model],key,!1));return c&&c.length?c[0]:void 0},Hje.registerComponentType=function(name,component){name&&(void 0===component?delete inner.controls[name]:inner.controls[name]=component)},Hje.render=render}(Hje||(Hje={})),"function"==typeof define?(define.amd||"undefined"!=typeof __webpack_require__)&&define(["exports"],function(exports){return Hje}):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&(module.exports=Hje),function(Hje){var MemoryJsonGenerator=function(){function MemoryJsonGenerator(){this.defaultTagName="default"}return MemoryJsonGenerator.prototype.initView=function(context,tagName){var ele=context.element();if(!ele||"object"!==typeof ele)return{tagName:tagName||"default",props:{},handlers:{},style:{},styleRefs:[],children:[]};if(ele.props||(ele.props={}),ele.handlers||(ele.handlers={}),ele.style||(ele.style={}),ele.styleRefs)ele.styleRefs instanceof Array||(ele.styleRefs="string"==typeof ele.styleRefs?[ele.styleRefs]:[]);else{var className=ele.className;ele.styleRefs=className&&className instanceof Array?className:[]}if(ele.children&&ele.children instanceof Array)for(;ele.children.length;)ele.children.pop();else ele.children=[];return ele},MemoryJsonGenerator.prototype.alive=function(element){return!(!element||!element.parent)},MemoryJsonGenerator.prototype.unmount=function(element){if(element){if(element.parent){var i=element.parent.children.indexOf(element);i>=0&&delete element.parent.children[i]}element.parent=void 0,element.children=[]}},MemoryJsonGenerator.prototype.append=function(parent,child){if(parent&&child){if(child.parent){var i=child.parent.children.indexOf(child);i>=0&&delete child.parent.children[i]}child.parent=parent,parent.children.indexOf(child)<0&&parent.children.push(child)}},MemoryJsonGenerator.prototype.setProp=function(context,key,value){var element=context.element();element&&(element.props[key]=value)},MemoryJsonGenerator.prototype.getProp=function(context,key){var element=context.element();if(element)return element.props[key]},MemoryJsonGenerator.prototype.setStyle=function(context,style,styleRefs){var element=context.element();element&&(style&&(element.style=style),styleRefs||(element.styleRefs=[]),element.styleRefs="string"==typeof styleRefs?[styleRefs]:styleRefs)},MemoryJsonGenerator.prototype.getStyle=function(context){var element=context.element(),result={inline:void 0,refs:[],computed:function(pseudoElt){return element.style||{}}};return element?(result.inline=element.style||{},result.refs=element.styleRefs||element.className||[],result):result},MemoryJsonGenerator.prototype.setTextValue=function(context,value){var element=context.element();if(element){var text={tagName:"text",parent:element,props:{value:value},handlers:{},style:{},styleRefs:[],children:[]};element.children=[text]}},MemoryJsonGenerator.prototype.bindProp=function(context,keys){},MemoryJsonGenerator.prototype.onInit=function(context){},MemoryJsonGenerator.prototype.on=function(context,key,handler){var element=context.element();if(element)return element.handlers[key]=handler,{dispose:function(){delete element.handlers[key]}}},MemoryJsonGenerator}();Hje.MemoryJsonGenerator=MemoryJsonGenerator}(Hje||(Hje={})),function(Hje){Hje.name=function(){return"Hyper-JSON Engine"}}(Hje||(Hje={})),function(Hje){var RelativePathInfo=function(){function RelativePathInfo(path){if(this._info={abs:!1,arr:void 0,back:void 0,value:void 0,part:void 0},path){var host,protocal=(path=function(path){var j=path.indexOf("?");j<0&&(j=path.indexOf("#"));j<0&&(j=path.indexOf("\n"));j<0&&(j=path.indexOf("\r"));return j<0?path:path.substring(0,j)}(path)).indexOf("://");protocal>=0&&protocal<path.indexOf("/")&&(protocal+=3,host=path.substring(0,protocal),path=path.substring(path.indexOf("/",protocal)));for(var arr=path.split("/"),back=0,list=[],i=0;i<arr.length;i++){var dir=arr[i];dir&&"."!==dir&&(".."!==dir?list.push(dir):list.length<1?back++:list.pop())}if(path.endsWith("/")&&list.push(""),this._info.arr=list,this._info.abs=host||path.startsWith("/"),this._info.back=this._info.abs?0:back,this._info.part=this._info.value=list.join("/"),this._info.part="/"+this._info.part,!this._info.abs)if(0===this._info.back)this._info.value=host?host+"/"+this._info.value:"./"+this._info.value;else for(i=0;i<this._info.back;i++)this._info.value="../"+this._info.value}}return Object.defineProperty(RelativePathInfo.prototype,"value",{get:function(){return this._info.value},enumerable:!1,configurable:!0}),Object.defineProperty(RelativePathInfo.prototype,"childPath",{get:function(){return this._info.part},enumerable:!1,configurable:!0}),Object.defineProperty(RelativePathInfo.prototype,"parentLevel",{get:function(){return this._info.back},enumerable:!1,configurable:!0}),Object.defineProperty(RelativePathInfo.prototype,"isAbsolute",{get:function(){return this._info.abs},enumerable:!1,configurable:!0}),RelativePathInfo.prototype.toPathArray=function(onlyChildPathName){if(void 0===onlyChildPathName&&(onlyChildPathName=!1),onlyChildPathName)return this._info.arr;for(var arr=[],i=0;i<this._info.back;i++)arr.push("..");for(i=0;i<this._info.arr.length;i++)arr.push(this._info.arr[i]);return arr},RelativePathInfo.prototype.relative=function(path){if(!path)return this;if("string"==typeof path&&(path=new RelativePathInfo(path)),path.isAbsolute)return path;var p=this._info.value,i=p.lastIndexOf("/");return i<0?path:path=new RelativePathInfo(p=p.substring(0,i+1)+path.value)},RelativePathInfo.prototype.toString=function(){return this._info.value},RelativePathInfo.prototype.toJSON=function(){return this._info.value},RelativePathInfo}();Hje.RelativePathInfo=RelativePathInfo,Hje.getCookie=function(key){if(!key)return document.cookie;key+="=";var ca=document.cookie.split(";");for(var i in ca){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(c.startsWith(key))return decodeURIComponent(c.substring(key.length))}return""},Hje.queryArray=function(){if(!location.search||location.search.length<2)return[];for(var arr=location.search.substring(1).split("&"),list=[],i=0;i<arr.length;i++){var item=arr[i],j=item.indexOf("=");j<0?list.push(item):list.push({key:decodeURIComponent(item.substring(0,j)),value:decodeURIComponent(item.substring(j+1))})}return list},Hje.getQuery=function(name,options){var url=location.search;if(options||(options={fallback:""}),null==name)return null;try{var result;if("string"==typeof name)return null==(result=url.match(new RegExp("[?&]"+name+"=([^&]+)","i")))||result.length<1?options.fallback:options.notToDecode?result[1]:decodeURIComponent(result[1]);if("number"==typeof name)return null==(result=url.match(new RegExp("[?&][^?&]+=[^?&]+","g")))?options.fallback:options.notToDecode?result[name].substring(1):decodeURIComponent(result[name].substring(1))}catch(ex){}return null},Hje.getValueFromKeyedArray=function(arr,key){if(arr&&0!==arr.length)for(var i=0;i<arr.length;i++){var item=arr[i];if(item&&"string"!=typeof item&&item.key===key)return item.value}}}(Hje||(Hje={}));
var DeepX,__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},__extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(DeepX){!function(MdBlogs){function generateMenu(params,options){var _a;if(options||(options={}),!params||params.length<1)return{tagName:"ul",styleRefs:options.styleRefs};for(var label,arr=options.arr||[],deep=options.deep,localeOptions=null!=options.mkt?{mkt:options.mkt}:void 0,level=!0===deep?1:"number"==typeof deep&&deep>=0?deep+1:0,group=void 0,i=0;i<params.length;i++){var article=params[i];if("string"!=typeof article){if(label&&(arr.push({tagName:"li",styleRefs:"grouping-header",children:label}),label=void 0),article&&article.name&&article instanceof MdBlogs.ArticleInfo){var y=null===(_a=article.dateObj)||void 0===_a?void 0:_a.year;!1!==deep&&-2!==deep||!y||y==group||(group=y,arr.push({tagName:"li",styleRefs:"grouping-header",children:"number"==typeof group?group.toString(10):group}));var path=genArticlePath(article,options.path,localeOptions),result=generateMenuItemInternal(article,-1===deep||-2===deep?deep:level,path,options.click,localeOptions),hasSelected=options.select===article;if(hasSelected&&(result.styleRefs="state-sel"),"function"==typeof options.render&&options.render(result,article,{level:level,mkt:options.mkt,select:hasSelected,path:path}),arr.push(result),!(level<1))generateMenu(article.children(localeOptions),{arr:arr,select:options.select,mkt:options.mkt,path:options.path,deep:level,render:options.render})}}else label=article}return{tagName:"ul",styleRefs:options.styleRefs,children:arr}}function generateMenuItemInternal(article,level,path,click,options){var mkt=null==options?void 0:options.mkt,localeOptions=null!=mkt?{mkt:mkt}:void 0,intro=article.getIntro(localeOptions),tips=intro,title=article.getName(localeOptions),subtitle=article.getSubtitle(localeOptions);if(tips||(tips=title,subtitle&&(tips+="\n"+subtitle)),level>1){for(var prefix="",j=2;j<level;j++)prefix+="　";title=(prefix+="▹ ")+title}var text={tagName:"a",props:{href:path,title:tips},on:{click:function(ev){"function"==typeof click&&click(ev,article)}},children:subtitle?[{tagName:"span",children:title},{tagName:"span",children:subtitle}]:title},result={tagName:"li",props:{},children:[text],data:article},dateStr=article.dateString;if(!intro&&!dateStr)return result;if(-1===level){if("string"==typeof text.children&&(text.children=[{tagName:"span",children:text.children}]),text.children instanceof Array){var publishDate=article.dateObj;dateStr&&text.children.push({tagName:"br"},{tagName:"time",styleRefs:"x-font-size-s",props:{datetime:"".concat(publishDate.year.toString(10),"-").concat(publishDate.month.toString(10),"-").concat(publishDate.date.toString(10))},children:dateStr}),text.children.push({tagName:"br"}),text.children.push({tagName:"span",children:intro})}}else if(-2===level){var firstLine={tagName:"div",children:[{tagName:"strong",children:title},{tagName:"span",children:subtitle}]},secondLine=(publishDate=article.dateObj,{tagName:"div",children:[{tagName:"time",props:{datetime:"".concat(publishDate.year.toString(10),"-").concat(publishDate.month.toString(10),"-").concat(publishDate.date.toString(10))},children:article.dateString}]}),thumb=article.getThumb("wide");thumb&&secondLine.children.push({tagName:"img",props:{alt:title,src:thumb}}),text.children=[firstLine,secondLine],intro&&text.children.push({tagName:"div",children:[{tagName:"span",children:intro}]}),text.props&&delete text.props.title}return result}function genArticlePath(article,path,localeOptions){var path1="".concat("string"==typeof path?path:"","?").concat(article.getRoutePath(localeOptions));if("function"==typeof path){var path2=path(path1,article);path2&&(path1=path2)}return path1}MdBlogs.hooks={renderMd:void 0,fetchList:void 0},MdBlogs.showElements=function(show,hide){show&&show.forEach(function(ele){var element=document.getElementById(ele);element&&(element.style.display="")}),hide&&hide.forEach(function(ele){var element=document.getElementById(ele);element&&(element.style.display="none")})},MdBlogs.codeElements=function(element){if(element&&("string"!=typeof element||(element=document.getElementById(element)))){var blocks=element.getElementsByTagName("pre"),arr=[];if(blocks){for(var i=0;i<blocks.length;i++){var block=blocks[i].children.length>0?blocks[i].children[0]:void 0;block&&arr.push(block)}return arr}}},MdBlogs.generateMenu=generateMenu,MdBlogs.generateMenuPromise=function(articles,filter,options){return __awaiter(this,void 0,void 0,function(){var result,arr;return __generator(this,function(_a){switch(_a.label){case 0:return articles?("string"==typeof articles&&(articles=MdBlogs.fetchArticles(articles)),[4,articles]):[2,void 0];case 1:if(!(result=_a.sent()))return[2,void 0];if(options||(options={}),filter)if("function"==typeof filter)arr=filter(result);else if("blogs"===filter||"blog"===filter)arr=result.blogs({mkt:options.mkt});else{if("docs"!==filter&&"wiki"!==filter)return[2,void 0];arr=result.docs({mkt:options.mkt})}else arr=__spreadArray(__spreadArray([],result.docs({mkt:options.mkt}),!0),result.blogs({mkt:options.mkt}),!0);return[2,generateMenu(arr,options)]}})})},MdBlogs.generateMenuItem=function(article,level,path,click,options){return generateMenuItemInternal(article,level,path=genArticlePath(article,path,options),click,options)},MdBlogs.generateCdnScript=function(name,ver,url,path){if(name&&url){var s=name;return ver&&(s+="@"+ver),path?path.startsWith("/")||(path="/"+path):path="",{tagName:"div",styleRefs:"x-part-code",children:[{tagName:"code",children:[{tagName:"span",styleRefs:"x-code-pack",children:"<"},{tagName:"span",styleRefs:"x-code-tag",children:"script"},{tagName:"span",children:" "},{tagName:"span",styleRefs:"x-code-attr",children:"type"},{tagName:"span",children:"="},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",styleRefs:"x-code-string",children:"text/javascript"},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",children:" "},{tagName:"span",styleRefs:"x-code-attr",children:"src"},{tagName:"span",children:"="},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",styleRefs:"x-code-string",children:url+=s+path},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",styleRefs:"x-code-pack",children:" ></"},{tagName:"span",styleRefs:"x-code-tag",children:"script"},{tagName:"span",styleRefs:"x-code-pack",children:">"}]}]}}},MdBlogs.buttonList=function buttonList(config){if(config){var m={};if(config.styleRefs&&(m.styleRefs=config.styleRefs),config.style&&(m.style=config.style),config.props&&(m.props=config.props),config.data&&(m.data=config.data),!0===config.item){if(!config.text)return;return m.tagName="a",m.children=Hje.toSpan(config.text,!0),"function"==typeof config.click&&(m.on={click:function(ev){config.click(ev)}}),m}var itemConfig=config.item||{};if(m.children=[],config.list instanceof Array)for(var i=0;i<config.list.length;i++){var item=config.list[i];if(item)if("number"==typeof item&&(item=item.toString(10)),"string"!=typeof item)if(!0!==item){var itemProps={};item.url&&(itemProps.href=item.url),item.title&&(itemProps.title=item.title),m.children.push(buttonList({text:item.text,styleRefs:item.styleRefs||itemConfig.styleRefs,style:item.style||itemConfig.style,props:itemProps,click:item.click||itemConfig.click,item:!0}))}else m.children.push({tagName:"br"});else m.children.push({tagName:"span",styleRefs:config.groupStyleRefs,children:item})}return m}}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){var Articles=function(){function Articles(data,options){var blogConfig,path=null==options?void 0:options.path;path&&"boolean"!=typeof path||(path="./"),"string"==typeof path&&(path=new Hje.RelativePathInfo(path)),data.blog?data.blog instanceof Array?blogConfig={list:data.blog}:(blogConfig=data.blog).list||(blogConfig.list=[]):blogConfig={list:[]},this._inner={data:data||{},path:path,blogConfig:blogConfig,fetch:null==options?void 0:options.fetch,pageIndex:0}}return Object.defineProperty(Articles.prototype,"name",{get:function(){return MdBlogs.getLocaleProp(this._inner.data)},enumerable:!1,configurable:!0}),Object.defineProperty(Articles.prototype,"description",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"description")},enumerable:!1,configurable:!0}),Object.defineProperty(Articles.prototype,"options",{get:function(){return this._inner.data.options||{}},enumerable:!1,configurable:!0}),Articles.prototype.blogsInfo=function(options){var count=this._inner.blogConfig.count;return{name:MdBlogs.getLocaleProp(this._inner.blogConfig,null,options)||MdBlogs.getLocaleProp(this._inner.data,null,options),count:count,dir:MdBlogs.getLocaleProp(this._inner.blogConfig,"dir"),further:MdBlogs.getLocaleProp(this._inner.blogConfig,"further")}},Articles.prototype.getName=function(options){return MdBlogs.getLocaleProp(this._inner.data,null,options)},Articles.prototype.getDescription=function(optional){return MdBlogs.getLocaleProp(this._inner.data,"description",optional)},Articles.prototype.home=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.home&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.home;if(null!==this._inner.home){var url=MdBlogs.getLocaleProp(this._inner.data,"home",options);if(url&&"string"==typeof url)return this._inner.home=this.genInfo({name:this._inner.data.name,file:url}),this._inner.home;this._inner.home=null}},Articles.prototype.blogs=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.blogs&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.blogs;var blogInfo=this._inner.blogConfig,path=this._inner.path,fetchHandler=this._inner.fetch,localeOptions={mkt:null==options?void 0:options.mkt},dir=MdBlogs.getLocaleProp(blogInfo,"dir"),rela=dir?path.relative(dir):path,defs=this._inner.data.$defs,list=blogInfo.list.map(function(blog){return blog&&blog.name&&!MdBlogs.getLocaleProp(blog,"disable",localeOptions)?new MdBlogs.ArticleInfo(blog,{rela:rela,year:blogInfo.year||!0,fetch:fetchHandler,definitions:defs}):null}).filter(function(blog){return!!(blog&&blog.dateObj&&blog.getPath())&&(blog.children(),!0)});return blogInfo.reverse||list.reverse(),specificMkt||(this._inner.blogs=list),list},Articles.prototype.docs=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.docs&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.docs;var docs=this._inner.data.docs||this._inner.data.wiki,store=[];if(!docs)return specificMkt||(this._inner.docs=store),store;for(var localeOptions={mkt:null==options?void 0:options.mkt},i=0;i<docs.length;i++){var item=docs[i];if(item)if("string"!=typeof item){if(item.name){var disable=MdBlogs.getLocaleProp(item,"disable",localeOptions);disable?"label"!==disable&&"header"!==disable||store.push(MdBlogs.getLocaleProp(item,null,localeOptions)):this.genInfo(item,store)}}else store.push(item)}return specificMkt||(this._inner.docs=store),store},Articles.prototype.hiddenArticles=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.hidden&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.hidden;var localeOptions={mkt:null==options?void 0:options.mkt},path=this._inner.path,fetchHandler=this._inner.fetch,defs=this._inner.data.$defs,list=(this._inner.data.hiddenArticles||[]).map(function(blog){return blog&&blog.name&&!MdBlogs.getLocaleProp(blog,"disable",localeOptions)?new MdBlogs.ArticleInfo(blog,{rela:path,fetch:fetchHandler,definitions:defs}):null}).filter(function(blog){return!(!blog||!blog.getPath())&&(blog.children(),!0)});return specificMkt||(this._inner.hidden=list),list},Articles.prototype.addBlog=function(article){if(null==article?void 0:article.name){var item=new MdBlogs.ArticleInfo(article,{rela:this._inner.path,year:this._inner.blogConfig.year||!0,fetch:this._inner.fetch,definitions:this._inner.data.$defs}),arr=this.blogs(),source=this._inner.data.blog;return source||(source=[],this._inner.data.blog=source),source instanceof Array?source.push(article):(source.list instanceof Array||(source.list=[]),source.reverse?source.list.splice(0,0,article):source.list.push(article)),arr.splice(0,0,item),item}},Articles.prototype.addDocs=function(article){if(article){if("string"==typeof article)return this._inner.docs=void 0,this._inner.data.docs||(this._inner.data.docs=[]),this._inner.data.docs.push(article),article;if(article.name){if(this._inner.docs=void 0,this._inner.data.docs||(this._inner.data.docs=[]),"string"==typeof article.disable)return this._inner.data.docs.push(article),MdBlogs.getLocaleProp(article);var item=new MdBlogs.ArticleInfo(article,{rela:this._inner.path,fetch:this._inner.fetch,definitions:this._inner.data.$defs});return this._inner.data.docs.push(article),item}}},Articles.prototype.addHiddenArticle=function(article){if(null==article?void 0:article.name){var item=new MdBlogs.ArticleInfo(article,{rela:this._inner.path,fetch:this._inner.fetch,definitions:this._inner.data.$defs});return this.hiddenArticles().push(item),this._inner.data.hiddenArticles||(this._inner.data.hiddenArticles=[]),this._inner.data.hiddenArticles.push(article),item}},Articles.prototype.clearBlogs=function(){this._inner.blogs=void 0;var source=this._inner.data.blog;if(source||(source=[],this._inner.data.blog=source),source instanceof Array)for(;source.length>0;)source.pop();else if(source.list instanceof Array)for(;source.list.length>0;)source.list.pop()},Articles.prototype.clearDocs=function(){this._inner.docs=void 0,this._inner.data.docs=void 0,this._inner.data.wiki&&delete this._inner.data.wiki},Articles.prototype.clearHiddenArticles=function(){this._inner.hidden=void 0,this._inner.data.hiddenArticles=void 0},Articles.prototype.toJSON=function(){return this._inner.data},Articles.prototype.loadMoreBlogs=function(){return __awaiter(this,void 0,void 0,function(){var _a,further,list,pg,url,result,json,arr,i,item,has,j,test,_b;return __generator(this,function(_c){switch(_c.label){case 0:if(_a=this._inner.blogConfig,further=_a.further,list=_a.list,!(further&&further instanceof Array))return[2,!1];if((pg=this._inner.pageIndex)>=further.length)return[2,!1];for(;!further[pg];)if(pg++,this._inner.pageIndex=pg,pg>=further.length)return[2,!1];return"string"!=typeof(url=null===(_b=this._inner.path.relative(further[pg]))||void 0===_b?void 0:_b.value)?[2,!1]:[4,(MdBlogs.hooks.fetchList||fetch)(url)];case 1:return result=_c.sent(),this._inner.pageIndex+=1,result&&result.ok?[4,result.json()]:[2,!1];case 2:if(!((json=_c.sent())&&json.blog&&json.blog instanceof Array))return[2,!1];for(arr=json.blog,(json.options||{}).reverse&&arr.reverse(),this._inner.blogs=void 0,i=0;i<arr.length;i++)if(item=arr[i]){for(has=!1,j=0;j<list.length;j++)if((test=list[j])&&test.date===item.date&&test.file===item.file&&test.dir===item.dir){has=!0;break}has||list.splice(0,0,item)}return[2]}})})},Articles.prototype.get=function(name,options){var mkt=null==options?void 0:options.mkt;if("number"==typeof name){if(isNaN(name)||name<0)return;return this.blogs(options)[name]}var redir=this._inner.data.redir;if(redir&&"string"==typeof name){var name2=redir[name];name2&&"string"==typeof name2&&(name=name2)}var result=getArticle(this.docs({mkt:mkt}),name,options);return result||((result=getArticle(this.blogs({mkt:mkt}),name,options))||getArticle(this.hiddenArticles({mkt:mkt}),name,options))},Articles.prototype.genInfo=function(article,list){if(article){var info=new MdBlogs.ArticleInfo(article,{rela:this._inner.path,fetch:this._inner.fetch,definitions:this._inner.data.$defs});return list instanceof Array&&list.push(info),info}},Articles.prototype.relative=function(path){return this._inner.path.relative(path)},Articles.prototype.some=function(callback,thisArg,options){var context={index:0,thisArg:thisArg,deep:!0,options:options};return!0===someInternal(this.docs(options),callback,context)||(context.deep=!1,!0===someInternal(this.blogs(options),callback,context))},Articles.prototype.nextArticle=function(current,options){var target,match=!1;return this.some(function(article){return match?(target=article,!0):(article===current&&(match=!0),!1)},void 0,options),target||(match&&(target=null),target)},Articles.prototype.previousArticle=function(current,options){var target,temp=null;return this.some(function(article){return article===current?(target=temp,!0):(temp=article,!1)},void 0,options),target},Articles.prototype.parentArticle=function(current,options){for(var blogs=this.blogs(options),i=0;i<blogs.length;i++){var item=blogs[i];if(item===current)return null;var test=isParent(item,current);if(test)return test}},Articles}();function getArticle(list,name,options){for(var i=0;i<list.length;i++){var item=list[i];if(item&&item instanceof MdBlogs.ArticleInfo){if(item.is(name,options))return item;var children=item.children(options);if(children){var child=getArticle(children,name,options);if(child)return child}}}}function someInternal(list,callback,context){context?"number"!=typeof context.index&&(context.index=0):context={index:0};for(var i=0;i<list.length;i++){var w=list[i];if(w&&w instanceof MdBlogs.ArticleInfo){var b=void 0!==context.thisArg?callback.call(context.thisArg,w,context.index):callback(w,context.index);if(context.index++,!0===b)return!0;if(context.deep){var children=w.children(context.options);if(children&&!0===someInternal(children,callback,context))return!0}}}return!1}function isParent(parent,child){for(var children=parent.children(),i=0;i<children.length;i++){var item=children[i];if(item){if(item===child)return parent;var test=isParent(item,child);if(test)return test}}}MdBlogs.Articles=Articles,MdBlogs.fetchArticles=function(url,fetchHandler){return __awaiter(this,void 0,void 0,function(){var json;return __generator(this,function(_a){switch(_a.label){case 0:return[4,(MdBlogs.hooks.fetchList||fetch)(url)];case 1:return[4,_a.sent().json()];case 2:return json=_a.sent(),[2,new Articles(json,{path:url,fetch:fetchHandler})]}})})}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){function isSamePath(test,file,dir){return"boolean"==typeof file||null==file||"string"==typeof file&&(dir+=file.toLowerCase().endsWith(".md")?file.substring(0,file.length-3):file),!(!dir||test!==dir)||!(!dir.endsWith("/")||test.endsWith("/")||dir.substring(0,dir.length-1)!==test)}var ArticleInfo=function(){function ArticleInfo(data,options){this._inner={y:!1},this._inner.fetch=null==options?void 0:options.fetch,this._inner.rela=(null==options?void 0:options.rela)||new Hje.RelativePathInfo("./");var s,time,defs=(null==options?void 0:options.definitions)||{};if(this._inner.definitions=defs,!data)return this._inner.data={},void(this._inner.keywords=[]);this._inner.data=data,this._inner.date=(s=data.date)instanceof Date?s:"number"==typeof s?new Date(s):s?(8===s.length?time=new Date(parseInt(s.substring(0,4)),parseInt(s.substring(4,6))-1,parseInt(s.substring(6,8))):9===s.length?time=new Date(parseInt(s.substring(0,5)),parseInt(s.substring(5,7))-1,parseInt(s.substring(7,9))):s.length>9&&s.includes("-")&&(time=new Date(s)),isNaN(time)?void 0:time):void 0,this._inner.keywords=MdBlogs.nameValueModels(data.keywords,defs.keywords);var y=null==options?void 0:options.year;if(this._inner.y=y,y&&this._inner.date)if("string"==typeof y){var d=this._inner.date,group="";switch(y.toLowerCase()){case"month":case"m":group+=d.getFullYear().toString(10)+"/",d.getMonth()<9&&(group+="0"),group+=(d.getMonth()+1).toString(10);break;case"date":case"day":case"d":group+=d.getFullYear().toString(10)+"/",d.getMonth()<9&&"0",group+=(d.getMonth()+1).toString(10),d.getDate()<10&&"0",group+=d.getDate().toString(10);break;case"none":break;default:group=d.getFullYear().toString(10)}group&&(this._inner.year=group)}else this._inner.year=this._inner.date.getFullYear().toString(10)}return Object.defineProperty(ArticleInfo.prototype,"id",{get:function(){var _a,s=null===(_a=this._inner.data)||void 0===_a?void 0:_a.id;return"string"==typeof s&&s.length>10?s:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"name",{get:function(){return MdBlogs.getLocaleProp(this._inner.data)},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"subtitle",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"subtitle")},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"keywords",{get:function(){return this._inner.keywords},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"intro",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"intro")},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"notes",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"notes")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"authors",{get:function(){if(this._inner.author)return this._inner.author;var name=this._inner.data.author||this._inner.data.authors||this._inner.data.contributors;return this._inner.author=new MdBlogs.ContributorCollection(name,this._inner.definitions.contributors,this._inner.definitions.roles,["author","translator"]),this._inner.author},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"contentCache",{get:function(){return this._inner.content},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"dateObj",{get:function(){var date=this._inner.date;if(date){var y=date.getFullYear();if(!(y<2e3))return{year:y,month:date.getMonth()+1,date:date.getDate()}}},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"dateString",{get:function(){var date=this._inner.date;return date&&date.getFullYear()>=2e3?date.toLocaleDateString():void 0},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"location",{get:function(){return this._inner.data.location},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"data",{get:function(){var _a;return null===(_a=this._inner.data)||void 0===_a?void 0:_a.data},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"disableMenu",{get:function(){return!this._inner.data||!!this._inner.data.options&&this._inner.data.options.disableMenu},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"disableAuthors",{get:function(){return!this._inner.data||!!this._inner.data.options&&this._inner.data.options.disableAuthors},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"bannerImage",{get:function(){var _a;return(null===(_a=this._inner.data)||void 0===_a?void 0:_a.options)?this._inner.data.options.banner:void 0},enumerable:!1,configurable:!0}),ArticleInfo.prototype.getRoutePath=function(options){var data=this._inner.data,dir=this.getDirPath(options);if(data&&dir){dir=dir.length<3?"":dir.substring(2,dir.length-1);var file=MdBlogs.getLocaleProp(data,"file",{mkt:null==options?void 0:options.mkt});return"boolean"==typeof data.file||null==data.file||"boolean"==typeof file||null==file||"string"==typeof file&&(dir+=(dir?"/":"")+(file.toLowerCase().endsWith(".md")?file.substring(0,file.length-3):file)),dir.endsWith("/")&&(dir=dir.substring(0,dir.length-1)),dir}},ArticleInfo.prototype.is=function(name,options){var data=this._inner.data;if(!data||!name)return!1;if(name===this||name===data)return!0;if("string"==typeof data.id&&data.id.length>10&&data.id===name)return!0;var localeOptions={mkt:null==options?void 0:options.mkt},dirName=MdBlogs.getLocaleProp(data,"dir",localeOptions);dirName&&!dirName.endsWith("/")&&(dirName+="/");var dir=name.startsWith("/")?"/":"";this._inner.year&&(dir+=this._inner.year+"/");var dir2=dir;return dirName&&(dir+=dirName),!!isSamePath(name,MdBlogs.getLocaleProp(data,"file",localeOptions),dir)||((dirName=data.dir)&&!dirName.endsWith("/")&&(dirName+="/"),dirName&&(dir2+=dirName),isSamePath(name,data.file,dir2))},ArticleInfo.prototype.getPath=function(options){var path=this.getDirPath(options),file=MdBlogs.getLocaleProp(this._inner.data,"file",options);if(path&&null!=file)return!0===file||void 0===file?path+="README.md":!1===file||null===file||(path+=file),this._inner.rela.relative(path)},ArticleInfo.prototype.getName=function(options){return MdBlogs.getLocaleProp(this._inner.data,null,options)},ArticleInfo.prototype.getSubtitle=function(options){return MdBlogs.getLocaleProp(this._inner.data,"subtitle",options)},ArticleInfo.prototype.getIntro=function(options){return MdBlogs.getLocaleProp(this._inner.data,"intro",options)||MdBlogs.getLocaleProp(this._inner.data,"description",options)},ArticleInfo.prototype.getNotes=function(options){return MdBlogs.getLocaleProp(this._inner.data,"notes",options)||[]},ArticleInfo.prototype.getThumb=function(kind){var pic=this._inner.data.thumb;if(pic){if("string"==typeof pic)return pic;var p=pic[kind];if(p)return p;switch(kind){case"square":return pic.common||pic.tall||pic.wide;case"common":return pic.wide||pic.square||pic.tall;case"wide":return pic.common||pic.square||pic.tall;case"tall":return pic.square||pic.common||pic.wide;default:return pic.square||pic.common||pic.tall||pic.wide}}},ArticleInfo.prototype.getContent=function(options){var _a,_this=this;if(void 0!==this._inner.content&&!(null==options?void 0:options.reload))return Promise.resolve(this._inner.content);var path=this.getPath({mkt:null==options?void 0:options.mkt});if(!path)return Promise.reject("No path.");var result=this._inner.fetch?this._inner.fetch.call(this,path):fetch(path.value).then(function(r){return(null==r?void 0:r.ok)?r.text():r.text().then(function(s){return Promise.reject(new Error("fetch error\n"+s))})});if(!result)return Promise.reject(new Error("fetch handler error"));var name=this.getName(options),end2=null===(_a=this._inner.data)||void 0===_a?void 0:_a.end,end="boolean"==typeof end2||"string"==typeof end2?{end:end2}:end2||{};return result.then(function(md){if(!md)return _this._inner.content="",Promise.reject(new Error("empty"));if(end.start){var endTag="\x3c!-- "+(!0===end.start?"Start":end)+" --\x3e\n";(endIndex=md.indexOf(endTag))<0&&(endTag="\x3c!-- "+(!0===end.start?"Start":end)+" --\x3e\r\n",endIndex=md.indexOf(endTag)),endIndex>1&&(md=md.substring(endIndex+endTag.length))}if(end.end){var endIndex;endTag="\n\x3c!-- "+(!0===end.end?"End":end)+" --\x3e";(endIndex=md.lastIndexOf(endTag))>1&&(md=md.substring(0,endIndex))}var header1="# "+name+"\n";if(md.startsWith(header1)&&(md=md.substring(header1.length)),header1="# "+name+"\r\n",md.startsWith(header1)&&(md=md.substring(header1.length)),end.urls instanceof Array)for(var i=0;i<end.urls.length;i++){var replaceItem=end.urls[i];(null==replaceItem?void 0:replaceItem.old)&&"string"==typeof replaceItem.old&&"string"==typeof replaceItem.by&&(md=md.replace("(".concat(replaceItem.old,")"),"(".concat(replaceItem.by,")")))}return md=md.replace(/\]\(..\/..\/..\/..\//g,"](..4./").replace(/\]\(..\/..\/..\//g,"](..3./").replace(/\]\(..\/..\//g,"](..2./").replace(/\]\(..\//g,"]("+path.relative("../").value).replace(/\]\(..4.\//g,"]("+path.relative("../../../../").value).replace(/\]\(..3.\//g,"]("+path.relative("../../../").value).replace(/\]\(..2.\//g,"]("+path.relative("../../").value).replace(/\]\(.\//g,"]("+path.relative("./").value),_this._inner.content=md,md})},ArticleInfo.prototype.related=function(options){var _a,arr=null===(_a=this._inner.data)||void 0===_a?void 0:_a.related;return!arr||arr.length<1?[]:arr.map(function(link){if(link){if("string"==typeof link)return link;var name=MdBlogs.getLocaleProp(link,null,options);if(name){var disable=MdBlogs.getLocaleProp(link,"disable",options);return disable?"label"===disable||"header"===disable?name:void 0:{name:MdBlogs.getLocaleProp(link,null,options),subtitle:MdBlogs.getLocaleProp(link,"subtitle",options),url:MdBlogs.getLocaleProp(link,"url",options),data:link.data}}}}).filter(function(link){return null!=link})},ArticleInfo.prototype.children=function(options){var _a,specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt,defs=this._inner.definitions;if(this._inner.children&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.children;var arr=(null===(_a=this._inner.data)||void 0===_a?void 0:_a.children)||[],localeOptions={mkt:null==options?void 0:options.mkt},rela=this._inner.rela,y=this._inner.y,fetchHandler=this._inner.fetch,list=arr.map(function(blog){return blog&&blog.name&&!MdBlogs.getLocaleProp(blog,"disable",localeOptions)?new ArticleInfo(blog,{rela:rela,year:y,fetch:fetchHandler,definitions:defs}):null}).filter(function(blog){return null!=blog&&null!=blog.getPath()});return specificMkt||(this._inner.children=list),list},ArticleInfo.prototype.hasKeyword=function(test){return isStringInArray(this._inner.data.keywords,test)},ArticleInfo.prototype.isKind=function(test){var _a;return isStringInArray(null===(_a=this._inner.data.options)||void 0===_a?void 0:_a.kind,test)},ArticleInfo.prototype.toJSON=function(){return this._inner.data},ArticleInfo.prototype.getDirPath=function(options){var path="./";this._inner.year&&(path+=this._inner.year+"/");var dir=MdBlogs.getLocaleProp(this._inner.data,"dir",options);return dir&&(path+=dir,dir.endsWith("/")||(path+="/")),path},ArticleInfo}();function isStringInArray(arr,test){if(!test)return!1;if(!arr)return!1;"string"==typeof arr&&(arr=[arr]);for(var i=0;i<arr.length;i++){var item=arr[i];if(item&&(("string"==typeof item||(item=item.value)&&"string"==typeof item)&&item===test))return!0}return!1}MdBlogs.ArticleInfo=ArticleInfo}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){MdBlogs.render=function(element,data,options){var q=Hje.queryArray();options||(options={});var defaultTitle=options.title?!0===options.title?document.title:options.title:void 0,monitor={skip:!0},lifecycle={oninit:function(instance){var _a;monitor.skip=!1;var path=null===(_a=instance.select())||void 0===_a?void 0:_a.getRoutePath();path&&history.replaceState({select:path},"","?".concat(path))},onselect:function(instance,article){if(!monitor.skip){var path=article.getRoutePath(),title=defaultTitle||instance.title||MdBlogs.getLocaleString("blogs");history.pushState({select:path},"","?".concat(path)),document.title=title?"".concat(article.name," - ").concat(title):article.name}},onhome:function(instance){monitor.skip||(history.pushState({select:""},"","./"),document.title=defaultTitle||instance.title)}},d={articles:data,lifecycle:lifecycle,banner:options.banner,supplement:options.supplement,onselect:options.onselect,onhome:options.onhome,onfetch:options.onfetch};q&&q.length>0&&("string"==typeof q[0]&&(d.select=q[0]),d.mkt=Hje.getValueFromKeyedArray(q,"mkt"));var component=Hje.render(element,{control:MdBlogs.ArticlesPart,data:d}),control=component.control();return window.addEventListener("popstate",function(ev){lifecycle.disable=!0;var path=ev.state?ev.state.select:"";if("string"==typeof path||null===path){var title=defaultTitle||control.title;if(path){var article=control.select(path);if(!article)return;document.title=title?"".concat(article.name," - ").concat(title):article.name}else control.home(),document.title=title||MdBlogs.getLocaleString("blogs")}lifecycle.disable=!1}),component}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){var en={name:"Name",publisher:"Publisher",author:"Author",dev:"Developer",contentCreator:"Content creator",refresh:"Refresh",keywords:"Keywords",status:"Status",available:"Available",timeout:"Timeout",invalid:"Invalid",article:"Article",articles:"Articles",articleMenu:"In this article",architecture:"Architecture",website:"Website",officialWebsite:"Official website",log:"Log",blog:"Blog",blogs:"Blogs",home:"Home",about:"About",game:"Game",games:"Games",video:"Video",videos:"Videos",screenshot:"Screenshot",screenshots:"Screenshots",photo:"Photo",photos:"Photos",pic:"Picture",pics:"Pictures",file:"File",files:"Files",lib:"Library",libs:"Libraries",package:"Package",packages:"Packages",tool:"Tool",tools:"Tools",book:"Book",books:"Books",comment:"Comment",comments:"Comments",docs:"Docs",search:"Search",settings:"Settings",tutorial:"Tutorial",work:"Work",works:"Works",events:"Events",seeMore:"More",learnMore:"Learn more",back:"Back",goHome:"Back to homepage",recomm:"Recommendation",ok:"OK",cancel:"Cancel",continue:"Continue",open:"Open",close:"Close",new:"New",add:"Add",modify:"Modify",remove:"Remove",delete:"Delete",on:"On",off:"Off",enable:"Enable",disable:"Disable",enabled:"Enabled",disabled:"Disabled",unknown:"Unknown",empty:"Empty",notFound:"Not found",loading:"Loading…",seeAlso:"See also",error:"Error",loadFailed:"Load failed.",renderFailed:"Render failed.",today:"Today",thisYear:"This year",top:"Top",next:"Next",previous:"Previous",projects:"Projects",archiveProjects:"Archive projects",features:"Features",installation:"Installation",sourceCode:"Source",community:"Community",link:"Link",otherLinks:"Other links",relatedLinks:"Related links",xp:"Experience",experience:"Experience",page:"Page",more:"More…",details:"Details",getDetails:"Get details"},hans={name:"名称",publisher:"发行商",author:"作者",dev:"研发",contentCreator:"内容创作者",refresh:"刷新",keywords:"关键词",status:"状态",available:"可用",timeout:"超时",invalid:"验证错误",article:"文章",articles:"文章",articleMenu:"文章目录",architecture:"架构",website:"网站",officialWebsite:"官网",log:"日志",blog:"博客",blogs:"博客",home:"首页",about:"关于",game:"游戏",games:"游戏",video:"视频",videos:"视频",screenshot:"截图",screenshots:"截图",photo:"照片",photos:"照片",pic:"图片",pics:"图片",file:"文件",files:"文件",lib:"库",libs:"库",package:"包",packages:"包",tool:"工具",tools:"工具",book:"书",books:"书",comment:"评论",comments:"评论",docs:"文档",search:"搜索",settings:"设置",tutorial:"教程",work:"作品",works:"作品",events:"活动",seeMore:"查看更多",learnMore:"了解详情",back:"返回",goHome:"返回首页",recomm:"推荐",ok:"确定",cancel:"取消",continue:"继续",open:"打开",close:"关闭",new:"新建",add:"添加",modify:"修改",remove:"移除",delete:"删除",on:"开",off:"关",enable:"启用",disable:"禁用",enabled:"已启用",disabled:"已禁用",unknown:"未知",empty:"空",notFound:"未找到",loading:"加载中…",seeAlso:"参考",error:"错误",loadFailed:"加载失败。",renderFailed:"渲染失败。",today:"今天",thisYear:"今年",top:"返回顶部",next:"下一篇",previous:"上一篇",projects:"项目",archiveProjects:"归档项目",features:"功能",installation:"安装",sourceCode:"源码",community:"社区",link:"链接",otherLinks:"更多链接",relatedLinks:"相关链接",xp:"体验",experience:"经历",page:"页面",more:"更多…",details:"详情",getDetails:"获取详情"},obj={strings:en,"strings#en":en,"strings#zh-Hans":hans,"strings#zh-CN":hans,"strings#zh-SG":hans};function getLocaleString(key,mkt){return MdBlogs.getLocaleProp(obj,"strings",{mkt:mkt})[key]||obj.strings[key]}MdBlogs.getLocaleString=getLocaleString,MdBlogs.setElementText=function(element,key){if(key&&"string"==typeof key){var s=getLocaleString(key);return s?(element&&("string"==typeof element&&(element=document.getElementById(element)),element&&element.tagName&&(element.innerText=s)),s):s}}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),"function"==typeof define?(define.amd||"undefined"!=typeof __webpack_require__)&&define(["exports"],function(exports){return DeepX.MdBlogs}):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&(module.exports=DeepX.MdBlogs),function(DeepX){!function(MdBlogs){var NameValueModel=function(){function NameValueModel(m){this._model=m?"string"==typeof m?{value:m}:m:{value:void 0}}return Object.defineProperty(NameValueModel.prototype,"name",{get:function(){return this._model.name||this._model.value},enumerable:!1,configurable:!0}),Object.defineProperty(NameValueModel.prototype,"value",{get:function(){return this._model.value},enumerable:!1,configurable:!0}),NameValueModel.prototype.getName=function(options){return MdBlogs.getLocaleProp(this._model,null,options)||this._model.value},NameValueModel}();MdBlogs.NameValueModel=NameValueModel;var ContributorCollection=function(){function ContributorCollection(list,contributors,roles,defaultRole){var _a;if(defaultRole&&"string"==typeof defaultRole&&(defaultRole=[defaultRole]),defaultRole&&defaultRole instanceof Array&&!(defaultRole.length<1)?defaultRole[0]||(defaultRole[0]="contributor"):defaultRole=["contributor"],this._defaultRole=defaultRole,this._model={},this._keys=[],list){"string"==typeof list&&(list=[list]);var defs=formatNameValueModelDefs(roles);list instanceof Array&&((_a={})[defaultRole[0]]=list,list=_a);var keys=Object.keys(list);contributors||(contributors=[]);for(var i=0;i<keys.length;i++){var roleName=keys[i];if(roleName){var members=list[roleName];if(members&&("string"==typeof members&&(members=[members]),members instanceof Array)){for(var arr={role:defs[roleName]||getRole(roleName)||new NameValueModel(roleName),members:[]},j=0;j<members.length;j++){var item=members[j];if(item){if("string"==typeof item){for(var k=0;k<contributors.length;k++){var contributor=contributors[k];contributor&&(contributor.name!==item&&contributor.email!==item||(item=contributor))}if("string"==typeof item){var atPos=item.indexOf("@");item=atPos>0&&item.lastIndexOf(".")>atPos?{name:item,email:item}:{name:item}}}arr.members.push(item)}}arr.members.length<1||(this._model[roleName]=arr,this._keys.push(roleName))}}}}}return ContributorCollection.prototype.list=function(role){return this._model[role||this._defaultRole[0]]},ContributorCollection.prototype.filter=function(role){if(!role)return[];if("string"==typeof role){if("*"===role)return this.all();role=[role]}for(var arr=[],model=this._model,i=0;i<role.length;i++){var item=model[role[i]];item&&arr.push(item)}return arr},ContributorCollection.prototype.priorityList=function(){return this.filter(this._defaultRole)},ContributorCollection.prototype.roles=function(){return __spreadArray([],this._keys,!0)},ContributorCollection.prototype.all=function(){for(var arr=[],keys=this._keys,model=this._model,i=0;i<keys.length;i++){var item=model[keys[i]];item&&arr.push(item)}return arr},ContributorCollection}();function getRole(name){if(name)return MdBlogs.roles||(MdBlogs.roles={producer:new NameValueModel({name:"Producer","name#zh":"出品人",value:"producer"}),"executive producer":new NameValueModel({name:"Executive producer","name#zh":"监制",value:"executive producer"}),contributor:new NameValueModel({name:"Contributor","name#zh":"贡献者",value:"contributor"}),author:new NameValueModel({name:"Author","name#zh":"作者",value:"author"}),translator:new NameValueModel({name:"Translator","name#zh":"翻译",value:"translator"}),editor:new NameValueModel({name:"Editor","name#zh":"编辑",value:"editor"}),"chief editor":new NameValueModel({name:"Chief editor","name#zh":"主编",value:"chief editor"}),director:new NameValueModel({name:"Director","name#zh":"导演",value:"director"}),star:new NameValueModel({name:"Star actor","name#zh":"主演",value:"star"}),actor:new NameValueModel({name:"Actor","name#zh":"演员",value:"actor"}),dev:new NameValueModel({name:"Developer","name#zh":"研发",value:"dev"}),qa:new NameValueModel({name:"QA","name#zh":"测试",value:"qa"}),pm:new NameValueModel({name:"Product Manager","name#zh":"产品经历",value:"pm"}),pmo:new NameValueModel({name:"PMO","name#zh":"项目经历",value:"pmo"}),photographer:new NameValueModel({name:"Photographer","name#zh":"摄影师",value:"photographer"}),cameraman:new NameValueModel({name:"Cameraman","name#zh":"摄像师",value:"cameraman"}),designer:new NameValueModel({name:"Designer","name#zh":"设计师",value:"designer"}),"film editor":new NameValueModel({name:"Film editor","name#zh":"剪辑师",value:"film editor"}),"visual effects":new NameValueModel({name:"Visual Effects","name#zh":"特效师",value:"visual effects"}),painter:new NameValueModel({name:"Painter","name#zh":"画师",value:"painter"}),composer:new NameValueModel({name:"Composer","name#zh":"作曲",value:"composer"}),lyricist:new NameValueModel({name:"Lyricist","name#zh":"作词",value:"lyricist"}),writer:new NameValueModel({name:"Original writer","name#zh":"原著作者",value:"writer"}),vocal:new NameValueModel({name:"Vocal","name#zh":"主唱",value:"vocal"}),singer:new NameValueModel({name:"Singer","name#zh":"演唱",value:"singer"}),dancer:new NameValueModel({name:"Dancer","name#zh":"舞者",value:"dancer"}),arranger:new NameValueModel({name:"Arranger","name#zh":"编曲",value:"arranger"}),host:new NameValueModel({name:"Host","name#zh":"主持人",value:"host"}),"permanent guests":new NameValueModel({name:"Permanent guests","name#zh":"常驻嘉宾",value:"permanent guests"}),"special guests":new NameValueModel({name:"Special guests","name#zh":"飞行嘉宾",value:"special guests"})}),MdBlogs.roles[name]}function formatNameValueModelDefs(defs,ensure){var defs2={};if(defs instanceof Array)for(var j=0;j<defs.length;j++){(item=defs[j])&&item.value&&(defs2[item.value]=item instanceof NameValueModel?item:new NameValueModel(item))}else if(defs){var keys=Object.keys(defs);for(j=0;j<keys.length;j++){var item,key=keys[j];if(key)(item=defs[key])&&("string"==typeof item?item&&(defs2[key]=new NameValueModel({name:item,value:key})):!0===item?defs2[key]=new NameValueModel(key):item.value&&(defs2[key]=item instanceof NameValueModel?item:new NameValueModel(item)))}}return defs2}MdBlogs.ContributorCollection=ContributorCollection,MdBlogs.toMembers=function(list){var _a,arr=[];if(!list)return arr;for(var i=0;i<list.length;i++){var item=null===(_a=list[i])||void 0===_a?void 0:_a.members;if(item)for(var j=0;j<item.length;j++){var member=item[j];member&&arr.indexOf(member)<0&&arr.push(member)}}return arr},MdBlogs.nameValueModels=function(list,defs){var arr=[];if(!list)return arr;for(var defs2=formatNameValueModelDefs(defs),i=0;i<list.length;i++){var item=list[i];if(item)if(item instanceof NameValueModel)arr.push(item);else if("string"!=typeof item)item.value&&arr.push(new NameValueModel(item));else{var item2=defs2[item];arr.push(item2||new NameValueModel(item))}}return arr}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){MdBlogs.name=function(){return"MdBlogs - DeepX"}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){var ArticlesPart=function(_super){function ArticlesPart(element,options){var _this=_super.call(this,element,options)||this;_this.__inner={};var data=null==options?void 0:options.data;if(null!=(null==data?void 0:data.mkt)&&(_this.__inner.mkt=data.mkt),_this.currentModel={children:[{key:"content",tagName:"article",children:[]},{tagName:"aside",children:[{tagName:"nav",children:[{key:"contents",tagName:"ul",styleRefs:"link-tile-compact",children:[],style:{display:"none"}},{key:"title",tagName:"h1",style:{display:"none"}},{key:"menu",tagName:"ul",styleRefs:"link-tile-compact",children:[]}]}]}]},_this.refreshChild(),!data)return _this;var lifecycle=data.lifecycle||{disable:!0};return _this.__inner.lifecycle=lifecycle,"string"==typeof data.articles?MdBlogs.fetchArticles(data.articles).then(function(r){"function"==typeof data.onfetch&&data.onfetch({articles:r,mkt:_this.__inner.mkt,store:data.store}),_this.initRender(r,data.select,lifecycle)}):data.articles instanceof MdBlogs.Articles&&("function"==typeof data.onfetch&&data.onfetch({articles:data.articles,mkt:_this.__inner.mkt,store:data.store}),_this.initRender(data.articles,data.select,lifecycle)),_this}return __extends(ArticlesPart,_super),Object.defineProperty(ArticlesPart.prototype,"title",{get:function(){return this.__inner.title},set:function(value){this.__inner.title=value;var self=this;_super.prototype.childModel.call(this,"title",{children:[{tagName:"a",props:{href:"./"},on:{click:function(ev){ev.preventDefault(),self.home()}},children:value}],style:value?{}:{display:"none"}})},enumerable:!1,configurable:!0}),Object.defineProperty(ArticlesPart.prototype,"mkt",{get:function(){return this.__inner.mkt},set:function(value){this.__inner.mkt=value},enumerable:!1,configurable:!0}),ArticlesPart.prototype.home=function(){var _a,_b,already=!this.__inner.select;this.__inner.select=null;var children=[],config=this.__inner.info.options,options=this.createLocaleOptions();config.disableName||(children.push({tagName:"h1",children:this.__inner.info.getName(options)}),this.__inner.info.getDescription(options)&&children.push({tagName:"p",children:this.__inner.info.getDescription(options)}));var data=this.data||{};data.banner&&children.push(data.banner);var part=this.__inner.info.home(options);part&&children.push({tagName:"main",onInit:function(c){part.contentCache?renderMd(c.element(),part.contentCache):part.getContent(options).then(function(r){renderMd(c.element(),r)})},children:part.contentCache});var menu=[],docs=this.__inner.info.docs(options),listStyleRef="link-tile-compact";docs.length>0?(this.genMenu(menu,docs,!0),this.genMenu(menu,this.__inner.info.blogs(options),!1)):(this.genMenu(menu,this.__inner.info.blogs(options),-2),listStyleRef="link-item-blog"),children.push({tagName:"main",styleRefs:"x-part-blog-menu",children:[{tagName:"ul",styleRefs:listStyleRef,children:menu}]}),data.supplement&&children.push(data.supplement);var model=_super.prototype.childModel.call(this,"content",{children:children});_super.prototype.childModel.call(this,"contents",{children:[],style:{display:"none"}}),scrollToTop(),"function"==typeof data.onhome&&data.onhome({model:model,mkt:null==options?void 0:options.mkt,store:data.store}),this.refreshMenu(),already||null===(_b=null===(_a=this.lifecycle())||void 0===_a?void 0:_a.onhome)||void 0===_b||_b.call(_a,this),this.__inner.info.loadMoreBlogs()},ArticlesPart.prototype.select=function(article){var _a,_b,_c,_d,_e,_f,_g,_h,options=this.createLocaleOptions();if("number"==typeof article){if(-1===article)return void this.home();if(isNaN(article)||article<0)return this.__inner.select;var blogs=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.blogs(options);if(!(article=blogs[article]))return}else if("string"==typeof article){if(!article)return void this.home();if(!(article=null===(_b=this.__inner.info)||void 0===_b?void 0:_b.get(article,options)))return}if(!article||this.__inner.select===article)return this.__inner.select;var children=[],self=this,title=article.getName(options),banner=article.bannerImage;if(null==(banner="string"==typeof banner?{url:banner}:banner)?void 0:banner.url){var bannerStyle={};banner.maxHeight&&"number"==typeof banner.maxHeight&&(bannerStyle.maxHeight="".concat(banner.maxHeight.toString(10),"px")),banner.cover&&(bannerStyle.objectFit="cover",bannerStyle.width="100%"),children.push({tagName:"section",styleRefs:"x-part-blog-note",children:[{tagName:"div",styleRefs:"x-part-blog-banner",children:[{tagName:"img",props:{alt:banner.name||title,src:banner.url},style:bannerStyle}]}]})}children.push({tagName:"h1",children:title});var infoModel={tagName:"section",styleRefs:"x-part-blog-note",children:[]},subtitle=article.getSubtitle(options);subtitle&&infoModel.children.push({tagName:"div",styleRefs:"x-part-blog-subtitle",children:[{tagName:"strong",children:subtitle}]});var disableAuthors=article.disableAuthors||this.__inner.info.options.disableAuthors;if(!disableAuthors){var infoChildren=getMembersModel(MdBlogs.toMembers(null===(_c=article.authors)||void 0===_c?void 0:_c.priorityList()),null,options);infoChildren.length>0&&infoModel.children.push({tagName:"div",styleRefs:"x-part-blog-authors",children:infoChildren});var publishDate=article.dateObj;if(publishDate){var dateArr=[{tagName:"time",props:{datetime:"".concat(publishDate.year.toString(10),"-").concat(publishDate.month.toString(10),"-").concat(publishDate.date.toString(10))},children:article.dateString||publishDate.year.toString(10)}];article.location&&dateArr.push({tagName:"span",children:article.location}),1===infoChildren.length?(infoChildren.push(dateArr[0]),dateArr.length>1&&infoChildren.push(dateArr[1])):infoModel.children.push({tagName:"div",styleRefs:"x-part-blog-date",children:dateArr})}}infoModel.children.length>0&&children.push(infoModel);var mkt=null==options?void 0:options.mkt,data=self.data||{};children.push({tagName:"main",children:[{tagName:"div",styleRefs:"x-part-blog-notification",children:[{tagName:"em",children:MdBlogs.getLocaleString("loading",mkt)}]}],onInit:function(c){var _a,cm=c.model();if(cm&&cm.children&&!(null===(_a=cm.data)||void 0===_a?void 0:_a.state)){cm.data={state:"pending"};var config=self.__inner.info.options;article.getContent(options).then(function(md){cm.data.state="render";var mdEle=c.element();renderMd(mdEle,md),cm.data.state="done",article.disableMenu||config.disableMenu||self.childModel("contents",function(mdEle,mkt){var articleContents={children:[]},headers=function(container){for(var arr=[],i=0;i<container.children.length;i++){var para=container.children[i];if(para&&para.tagName){var tagName=para.tagName.toLowerCase();switch(tagName){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":arr.push(genHeadItem(para,parseInt(tagName.replace("h",""))))}}}return arr}(mdEle),levels=function(arr){if(!arr||arr.length<1)return[];for(var list=[],level=1;level<7;level++)for(var i=0;i<arr.length;i++){var item=arr[i];if(item&&item.level==level){list.push(level);break}}return list}(headers);if(!headers||headers.length<2||levels.length<1)return articleContents;articleContents.children.push({tagName:"li",children:[{tagName:"a",props:{href:"javascript:void(0)"},on:{click:function(ev){scrollToTop()}},children:"⇮ "+MdBlogs.getLocaleString("top",mkt)}]}),1==levels.length&&levels.push(levels[0]+1);for(var i=0;i<headers.length;i++){var item=headers[i];switch(item.level){case levels[0]:articleContents.children.push(genHeadModel(item));break;case levels[1]:articleContents.children.push(genHeadModel(item,!0))}}return articleContents.style={},articleContents}(mdEle,mkt))},function(err){cm.data.state="error",cm.children=[{tagName:"div",styleRefs:"x-part-blog-notification",children:[{tagName:"em",children:MdBlogs.getLocaleString("loadFailed")}]}],c.refresh()})}}});var related=[];!function(lines,children){if(!lines||!children)return;for(var i=0;i<lines.length;i++){var note=lines[i];if(note)if(note.startsWith("![img]\n")){var records=note.split("\n");children.push({tagName:"p",children:[{tagName:"img",props:{src:records[1],alt:records.length>2?records[2]:""}}]})}else children.push({tagName:"p",children:[{tagName:"span",children:note}]})}}(article.getNotes(options),related),function(keywords,children,options){var arr=[];if(keywords instanceof Array)for(var i=0;i<keywords.length;i++){var keyword=keywords[i];keyword&&arr.push({tagName:"span",children:keyword.getName(options)})}arr.length>0&&children.push({tagName:"h2",children:MdBlogs.getLocaleString("keywords")},{tagName:"div",styleRefs:"x-part-blog-keywords",children:arr})}(article.keywords,related,options),disableAuthors||function(source,children,options){var _a,_b,contributors=null==source?void 0:source.all();if(!contributors||contributors.length<1)return;if(1===contributors.length&&"author"===(null===(_a=contributors[0].role)||void 0===_a?void 0:_a.value))return;children.push({tagName:"h2",children:MdBlogs.getLocaleString("contentCreator")});for(var i=0;i<contributors.length;i++){var list=contributors[i];if(null===(_b=null==list?void 0:list.role)||void 0===_b?void 0:_b.name){var members=getMembersModel(list.members,list.role,options);members.length<1||children.push({tagName:"div",styleRefs:"x-part-blog-authors",children:members})}}}(article.authors,related,options),function(source,children,options){if(!source||!children)return;if((source=source.filter(function(n){return!!n&&("string"==typeof n||n.name&&n.url)})).length<1)return;children.push({tagName:"h2",children:MdBlogs.getLocaleString("seeAlso",null==options?void 0:options.mkt)});var label,relatedItems=[];children.push({tagName:"ul",styleRefs:"link-tile-compact",children:relatedItems});for(var i=0;i<source.length;i++){var link=source[i];"string"!=typeof link?(label&&(relatedItems.push({tagName:"li",styleRefs:"grouping-header",children:label}),label=void 0),relatedItems.push({tagName:"li",children:[{tagName:"a",props:{href:link.url,title:link.name+(link.subtitle?"\n"+link.subtitle:"")},children:[{tagName:"span",children:link.name},{tagName:"span",children:link.subtitle}]}]})):label=link}}(article.related(options),related,options),related.length>0&&children.push({tagName:"section",styleRefs:"x-part-blog-related",children:related});var previous=null===(_d=this.__inner.info)||void 0===_d?void 0:_d.previousArticle(article,options),next=null===(_e=this.__inner.info)||void 0===_e?void 0:_e.nextArticle(article,options),parent=null===(_f=this.__inner.info)||void 0===_f?void 0:_f.parentArticle(article,options);return previous||next?children.push({tagName:"section",styleRefs:"x-part-blog-next",children:[{tagName:"a",props:{href:"javascript:void(0)",title:tipArticleName("previous",previous,options)},on:{click:function(ev){ev.preventDefault(),previous?self.select(previous):self.home()}},children:[{tagName:"span",children:"<"},{tagName:"span",children:MdBlogs.getLocaleString("previous",mkt)}]},{tagName:"a",props:{href:"javascript:void(0)",title:tipArticleName("next",next,options)},on:{click:function(ev){ev.preventDefault(),next?self.select(next):self.home()}},children:[{tagName:"span",children:MdBlogs.getLocaleString("next",mkt)},{tagName:"span",children:">"}]}]}):children.push({tagName:"section",styleRefs:"x-part-blog-back",children:[{tagName:"a",props:{href:"javascript:void(0)",title:tipArticleName("back",parent,options)},on:{click:function(ev){ev.preventDefault(),parent?self.select(parent):self.home()}},children:[{tagName:"span",children:"<"},{tagName:"span",children:MdBlogs.getLocaleString("back",mkt)}]}]}),"function"==typeof data.onselect&&data.onselect({children:children,article:article,mkt:mkt,store:data.store}),_super.prototype.childModel.call(this,"content",{children:children}),this.__inner.select=article,this.refreshMenu(),scrollToTop(),null===(_h=null===(_g=this.lifecycle())||void 0===_g?void 0:_g.onselect)||void 0===_h||_h.call(_g,this,article),article},ArticlesPart.prototype.next=function(){var _a,options=this.createLocaleOptions(),blog=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.nextArticle(this.__inner.select,options);return void 0===blog?blog:null===blog?(this.home(),blog):(this.select(blog),blog)},ArticlesPart.prototype.previous=function(){var _a,options=this.createLocaleOptions(),blog=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.previousArticle(this.__inner.select,options);return void 0===blog?blog:null===blog?(this.home(),blog):(this.select(blog),blog)},ArticlesPart.prototype.parent=function(){var _a,options=this.createLocaleOptions(),blog=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.parentArticle(this.__inner.select,options);return void 0===blog?blog:null===blog?(this.home(),blog):(this.select(blog),blog)},ArticlesPart.prototype.initRender=function(articles,select,lifecycle){if(this.__inner.info!==articles&&articles){this.__inner.info=articles;var options=this.createLocaleOptions();this.title=articles.getName(options);var article,m={},arr=m.children;arr instanceof Array||(arr=[],m.children=arr),this.genMenu(arr,articles.docs(options),!0),this.genMenu(arr,articles.blogs(options),!1),m.style=arr.length>0?{}:{display:"none"},_super.prototype.childModel.call(this,"menu",m),select&&(article=this.select(select)),article||this.home(),lifecycle.disable||"function"!=typeof lifecycle.oninit||lifecycle.oninit(this)}},ArticlesPart.prototype.refreshMenu=function(){var list=_super.prototype.childModel.call(this,"menu");list.children instanceof Array||(list.children=[]);for(var i=0;i<list.children.length;i++){var item=list.children[i];item.data instanceof MdBlogs.ArticleInfo&&(item.styleRefs=this.__inner.select===item.data?"state-sel":null)}_super.prototype.refreshChild.call(this,"menu")},ArticlesPart.prototype.createLocaleOptions=function(){var mkt=this.__inner.mkt;return null==mkt||!0===mkt?void 0:{mkt:mkt}},ArticlesPart.prototype.lifecycle=function(){var l=this.__inner.lifecycle;return!l||l.disable?void 0:l},ArticlesPart.prototype.genMenu=function(arr,params,deep){var _a,self=this;return MdBlogs.generateMenu(params,{select:this.__inner.select,mkt:null===(_a=this.createLocaleOptions())||void 0===_a?void 0:_a.mkt,deep:deep,arr:arr,click:function(ev,article){ev.preventDefault(),self.select(article)}})},ArticlesPart}(Hje.BaseComponent);function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function renderMd(element,md){if("function"!=typeof MdBlogs.hooks.renderMd)try{if("object"==typeof marked&&"function"==typeof marked.parse?element.innerHTML=marked.parse(md):element.innerText=md,"object"==typeof hljs&&"function"==typeof hljs.highlightElement){var codes=MdBlogs.codeElements(element);if(codes)for(var i=0;i<codes.length;i++)hljs.highlightElement(codes[i])}}catch(ex){element.innerText=MdBlogs.getLocaleString("renderFailed")}else MdBlogs.hooks.renderMd(element,md)}function genHeadItem(ele,level){return{text:ele.innerText,level:level,scroll:function(){ele.scrollIntoView({behavior:"smooth"})}}}function genHeadModel(item,sub){var text=item.text;return sub&&(text="▹ "+text),{tagName:"li",children:[{tagName:"a",props:{href:"javascript:void(0)"},on:{click:function(ev){"function"==typeof item.scroll&&item.scroll()}},children:text}]}}function getMembersModel(authors,role,options){var arr=[];if(!authors)return arr;var roleName=null==role?void 0:role.getName(options);roleName&&arr.push({tagName:"strong",children:roleName});for(var i=0;i<authors.length;i++){var authorItem=authors[i];if(authorItem){var email=authorItem.email,atPos=email&&"string"==typeof email?email.indexOf("@"):-1;atPos<1&&(email=void 0);var authorName=MdBlogs.getLocaleProp(authorItem,null,options);if(!authorName){if(!email)continue;authorName=email.substring(0,atPos)}var link=authorItem.url;!link&&email&&(link="mailto:".concat(email)),arr.push(link?{tagName:"a",props:{href:link,target:"_blank"},children:authorName}:{tagName:"span",children:authorName})}}return roleName&&1===arr.length&&arr.pop(),arr}function tipArticleName(key,article,options){if(key=MdBlogs.getLocaleString("previous",null==options?void 0:options.mkt),!article)return key;var name=article.getName(options);return name?"".concat(key,"\n").concat(name):key}MdBlogs.ArticlesPart=ArticlesPart}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){function getKeyedPropValue(obj,key1,key2,options){var key=key1,v=obj[key];if(void 0===v&&key2&&(key=key2,v=obj[key2]),void 0===v)return null==options?void 0:options.fallback;var b=null==options?void 0:options.bind;return b&&(b.key=key),v}MdBlogs.setElementProp=function(element,key,value){element&&("string"==typeof element&&(element=document.getElementById(element)),element&&element.tagName&&(null==key?key=element.innerText=value:"display"===key&&"boolean"==typeof value?key=element.style.display=value?"":"none":element[key]=value))},MdBlogs.batchSetElementProp=function(list){if(list&&list instanceof Array)for(var i=0;i<list.length;i++){var item=list[i];item&&item.element&&DeepX.MdBlogs.setElementProp(item.element,item.key,DeepX.MdBlogs.getLocaleProp(item,"value"))}},MdBlogs.firstQuery=function(){var id=location.search;if(id&&id.length>1){var idEndPos=(id=id.substring(1)).indexOf("?");idEndPos>=0&&(id=id.substring(0,idEndPos)),(idEndPos=id.indexOf("&"))>=0&&(id=id.substring(0,idEndPos))}return id},MdBlogs.getLocaleProp=function(obj,key,options){if(!obj)return(null==options?void 0:options.fallback)||void 0;var mkt,b=(null==options?void 0:options.bind)||{};if("string"==typeof(null==options?void 0:options.mkt)&&(mkt=null==options?void 0:options.mkt),mkt||!1===(null==options?void 0:options.mkt)||"object"!=typeof navigator||(mkt=navigator.language),key||(key="name"),"string"!=typeof key)return getKeyedPropValue(obj,key,void 0,options);if(!mkt||"string"!=typeof mkt)return getKeyedPropValue(obj,key,void 0,options);var k="".concat(key,"#").concat(mkt),v=obj[k];if(void 0!==v)return b.key=k,v;var arr=mkt.split("-");if(arr.length<2)return getKeyedPropValue(obj,key,void 0,options);if(2===arr.length)return getKeyedPropValue(obj,"".concat(key,"#").concat(arr[0]),key,options);for(var special="".concat(key,"#").concat(arr[0],"-").concat(arr[2]);arr.length>2;){arr.pop(),k="";for(var j=0;j<arr.length;j++)(v=arr[j])&&(k&&(k+="-"),k+=v);if(void 0!==(v=obj["".concat(key,"#").concat(k)]))return v}return void 0!==(v=obj[special])?(b.key=special,v):getKeyedPropValue(obj,"".concat(key,"#").concat(arr[0]),key,options)}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={}));