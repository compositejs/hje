// Hyper-JSON Engine
var Hje,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(e){function i(e,o){if(!e)return 0;var i=[];e.forEach(function(e,t,n){e===o&&i.push(t)});for(var t=i.length,n=t-1;n--;)e.splice(i[n],1);return t}var r={};e.InternalInjectionPool={hittask:function(e){return function(e,t,n){if(e){var o=!1;return"function"==typeof n?n(t)&&(o=!0):void 0!==t&&(o=!0),o&&(r[e]=t),r[e]}}("hittask",e,function(e){return"function"==typeof e})}};var t=(n.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=0;return e.forEach(function(e){!e||0<=t._list.indexOf(e)||(e.dispose||"function"==typeof e.unsubscribe&&(e.dispose=e.unsubscribe),t._list.push(e),"function"==typeof e.pushDisposable&&e.pushDisposable({dispose:function(){i(this._list,e)}}),o++)}),o},n.prototype.pushDisposable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.push.apply(this,e)},n.prototype.remove=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=0;return e.forEach(function(e){e&&i(t._list,e)<1||o++}),o},n.prototype.removeDisposable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.remove.apply(this,e)},n.prototype.dispose=function(){var e,n,t=this._list;this._list=[],(e=t)&&(e instanceof Array||(e=[e]),n=[],e.forEach(function(t){if(t&&"function"==typeof t.dispose)try{t.dispose()}catch(e){n.push(t)}}),n.forEach(function(e){e&&"function"==typeof e.dispose&&e.dispose()}))},n);function n(){this._list=[]}e.DisposableArray=t}(Hje=Hje||{}),function(y){function d(e,t,n){var o=new y.DisposableArray,i={element:e,keyRefs:{},model:t,info:{},c:void 0,dispose:function(){o.dispose()}},r={element:function(){return i.element},model:function(){return i.model},control:function(){return i.c},pushDisposable:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.push.apply(o,e)},removeDisposable:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.remove.apply(o,e)},info:function(e,t){return 1<arguments.length&&(void 0===t?delete i.info[e]:i.info[e]=t),i.info[e]},childContext:function(e){return e?"string"==typeof e?i.keyRefs[e]:void 0:r},alive:function(){return n(i)}};return r.info.contain=function(e){return 0<=Object.keys(i.info).indexOf(e)},r.info.keys=function(){return Object.keys(i.info)},r.childContext.contain=function(e){return 0<=Object.keys(i.keyRefs).indexOf(e)},r.childContext.keys=function(){return Object.keys(i.keyRefs)},r.childContext.remove=function(e){if(e)if("string"!=typeof e&&"symbol"!=typeof e){if(e instanceof Array)for(var t in e){var n=e[t];n&&("string"!=typeof n&&"symbol"!=typeof n||delete i.keyRefs[n])}}else delete i.keyRefs[e]},{context:r,bag:i}}var n,e,t=(o.prototype.initView=function(e,t){var n=e.element(),o=typeof n;return n&&"symbol"!=o&&!0!==n?("string"==o?n=document.getElementById(n):"number"==o&&(n=document.body.children[n]),n):document.createElement(t||"div")},o.prototype.alive=function(e){if(!e||!e.parentElement)return!1;try{if(!e.parentElement.parentElement&&e!=document.body)return!1}catch(e){}return!0},o.prototype.unmount=function(e){e&&(e.innerHTML=null,e.remove())},o.prototype.append=function(e,t){e&&t&&e.appendChild(t)},o.prototype.setProp=function(e,t,n){var o=e.element();o&&(n&&"string"!=typeof n?o[t]=n:o.setAttribute(t,n))},o.prototype.getProp=function(e,t){var n=e.element();if(n)return n[t]||n.getAttribute(t)},o.prototype.setStyle=function(e,t,n){var o=e.element();o&&(t&&Object.keys(t).forEach(function(e){o.style[e]=t[e]}),n&&(o.className=n.join(" ")))},o.prototype.getStyle=function(e){var t=e.element(),n={inline:void 0,refs:[],computed:function(e){return t?getComputedStyle(t,e):void 0}};return t&&(n.inline=t.style,n.refs=t.classList||(t.className||"").split(" ")),n},o.prototype.setTextValue=function(e,t){var n=e.element();n&&("input"!==n.tagName?n.appendChild(new Text(t)):n.value=t)},o.prototype.bindProp=function(e,o){o.reg("value",function(t){var n=e.element();n&&o.on("change",function(e){t(n.value)})})},o.prototype.onInit=function(e){},o.prototype.on=function(e,t,n){var o=e.element();if(o)return o.addEventListener?(o.addEventListener(t,n,!1),{dispose:function(){o.removeEventListener(t,n,!1)}}):o.attachEvent?(o.attachEvent("on"+t,n),{dispose:function(){o.detachEvent&&o.detachEvent(t,n,!1)}}):void 0},o);function o(){this.defaultTagName="div"}function h(){return e=e||new t}function v(e){var t;if(0<arguments.length&&(e?void((t=e)&&"function"==typeof t.initView&&("function"!=typeof t.alive&&(t.alive=function(e){return null!==e}),"function"!=typeof t.append&&(t.append=function(e,t){}),"function"!=typeof t.on&&(t.on=function(e,t,n){return{dispose:function(){}}}),"function"!=typeof t.onInit&&(t.onInit=function(e){}),"function"!=typeof t.setProp&&(t.setProp=function(e,t,n){}),"function"!=typeof t.setStyle&&(t.setStyle=function(e,t,n){}),"function"!=typeof t.setTextValue&&(t.setTextValue=function(e,t){}),"function"!=typeof t.unmount&&(t.unmount=function(e){e&&"function"==typeof e.dispose&&e.dispose()})))&&(n=e):n=void 0),!n)try{window.document&&(n=h())}catch(e){}return n}function m(e){return e&&"function"==typeof e.subscribe}y.HtmlGenerator=t,y.viewGenerator=v;var i=(r.prototype.render=function(e,t){var n={keyRefs:this._bag.keyRefs};if(!e||!0===e)return g(this._bag.element,t,n);var o=this._context.childContext(e);if(o&&"function"==typeof o.element){var i=o.element();if(i)return g(i,t,n)}},r.prototype.childProps=function(e,t,n){var o=v(),i=this._context.childContext(e);if(i)return 2<arguments.length&&o.setProp(i,t,n),o.getProp(i,t)},r.prototype.childStyle=function(e,t,n){var o=v(),i=this._context.childContext(e);if(i){if(2<arguments.length&&"boolean"!=typeof n)return o.setStyle(i,t,n),o.getStyle(i);var r=(r=o.getStyle(i))||{};return 1<arguments.length?(!0===t?t=r.inline:!1===t?t=void 0:!0===n&&r.inline&&(t=__assign(__assign({},r.inline),t||{})),o.setStyle(i,t,r.refs),o.getStyle(i)):r}},r.prototype.addChildEventListener=function(e,t,n){var o=v(),i=this._context.childContext(e);o.on(i,t,n)},r.prototype.prop=function(e,t){return 1<arguments.length&&(this._bag.props[e]=t,"function"==typeof this.onPropChanged&&this.onPropChanged(e,t,this.childProps)),this._bag.props[e]},r.prototype.on=function(e,t){this.addChildEventListener(null,e,t)},r.prototype.style=function(e,t){return this.childStyle(null,e,t)},r.prototype.styleRefs=function(e){return this.childStyle(null,!0,e)},r.prototype.element=function(){return this._bag.element},r);function r(e){var t=d(e,void 0,function(e){var t=e.element;if(!t)return!1;var n=v();return!!n.alive(t)||(delete e.element,e.info={},e.keyRefs={},n.unmount(t),e.dispose(),!1)}),n=t.context,o=t.bag;this._bag=o,this._bag.props={},this._context=n}function g(e,f,t){var s,n;if(3<arguments.length&&arguments[3]&&("function"==typeof(n=arguments[3]).initView&&"function"==typeof n.alive&&(s=n)),s=s||v(),f&&s){t?"string"==typeof t&&("html"===t.toLowerCase()&&(s=h()),t={}):t={};var o=t.appendMode,i=t.keyRefs&&"object"==typeof t.keyRefs,r=f.key;r&&"string"==typeof r||(r=void 0);var u=d(o?void 0:e,f,function(e){var t=e.element;return!!t&&(!!s.alive(t)||(delete e.element,e.info={},i?r&&delete e.keyRefs[r]:e.keyRefs={},s.unmount(t),e.dispose(),!1))}),c=u.context,p=u.bag;if(p.element=s.initView(c,f.tagName),p.element){if("function"==typeof f.control)return o&&(s.append(e,p.element),o=!1),p.c=new f.control(p.element),f.props&&"object"==typeof f.props&&Object.keys(f.props).forEach(function(e){var t;e&&"string"==typeof e&&(t=f.props[e],p.c.prop(e,t))}),p.c.style(f.style,f.styleRefs),f.on&&"object"==typeof f.on&&Object.keys(f.on).forEach(function(e){var t;e&&"string"==typeof e&&(t=f.on[e],p.c.on(e,t))}),s.onInit(c),"function"==typeof t.onInit&&t.onInit(c),"function"==typeof f.onInit&&f.onInit(c),"function"==typeof t.onLoad&&t.onLoad(c),"function"==typeof f.onLoad&&f.onLoad(c),p.element;var l=f.props||f.attr||{},a=[];return"object"==typeof l&&Object.keys(l).forEach(function(t){if(t&&"string"==typeof t){var e=l[t];if(e&&"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e&&"symbol"!=typeof e)if(m(e)){a.push(t);var n=e.subscribe(function(e){c.alive()&&s.setProp(c,t,e)});c.pushDisposable(n)}else if("function"!=typeof e.then)if(e.source)switch(e.source){case"data":return void s.setProp(c,t,(f.data||{})[e.value])}else"object"==typeof e&&s.setProp(c,t,e);else e.then(function(e){return s.setProp(c,t,e)});else s.setProp(c,t,e)}}),(f.style||f.styleRefs)&&s.setStyle(c,f.style,f.styleRefs),f.on&&"object"==typeof f.on&&Object.keys(f.on).forEach(function(e){var t=f.on[e];if(t)if("function"==typeof t.process){var n=t.process;if(t.options)try{var o,i,r=y.InternalInjectionPool.hittask();r&&((o=new r).setOptions(t.options),i=n,o.pushHandler(function(){return i.call}),n=o.process)}catch(e){}s.on(c,e,function(e){n.call(t.thisArg,e,c)})}else"function"==typeof t&&s.on(c,e,t)}),0<a.length&&s.bindProp&&s.bindProp(c,{keys:function(){return a},length:function(){return a.length},get:function(e){return l[e]},reg:function(n,e){"function"==typeof e&&e(function(e){var t=l[n];if(!m(t))return l[n]=t,!1;if("function"==typeof t.set)t.set(e);else if("function"==typeof t.next)t.next(e);else{if("function"!=typeof t)return!1;t(e)}return!0})},contain:function(e){return 0<=Object.keys(l).indexOf(e)},on:function(e,t){s.on(c,e,t)}}),o&&s.append(e,p.element),s.onInit(c),"function"==typeof t.onInit&&t.onInit(c),"function"==typeof f.onInit&&f.onInit(c),f.children&&(f.children instanceof Array?f.children.forEach(function(n){n&&g(p.element,n,{onInit:function(e){var t=e.element();t&&(s.append(p.element,t),n.key&&"string"==typeof n.key&&(p.keyRefs[n.key]=e))},keyRefs:p.keyRefs,appendMode:!0})}):"string"==typeof f.children&&s.setTextValue(c,f.children)),"function"==typeof f.onLoad&&f.onLoad(c),"function"==typeof t.onLoad&&t.onLoad(c),c.element()}}}y.BaseComponent=i,y.render=g}(Hje=Hje||{}),"function"==typeof define?!define.amd&&"undefined"==typeof __webpack_require__||define(["exports"],function(e){return Hje}):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&(module.exports=Hje);