// MdBlogs - DeepX
var DeepX,__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(DeepX){!function(MdBlogs){function generateMenuItem(article,level,click,options){var mkt=null==options?void 0:options.mkt,localeOptions=null!=mkt?{mkt:mkt}:void 0,intro=article.getIntro(localeOptions),tips=intro,title=article.getName(localeOptions),subtitle=article.getSubtitle(localeOptions);if(tips||(tips=title,subtitle&&(tips+="\n"+subtitle)),level>1){for(var prefix="",j=2;j<level;j++)prefix+="　";title=(prefix+="▹ ")+title}var text={tagName:"a",props:{href:"?".concat(article.getRoutePath(localeOptions)),title:tips},on:{click:function(ev){"function"==typeof click&&click(ev,article)}},children:subtitle?[{tagName:"span",children:title},{tagName:"span",children:subtitle}]:title},result={tagName:"li",props:{},children:[text],data:article};if(-1===level&&intro&&("string"==typeof text.children&&(text.children=[{tagName:"span",children:text.children}]),text.children instanceof Array)){text.children.push({tagName:"br"}),text.children.push({tagName:"span",children:intro});var publishDate=article.dateObj,dateStr=article.dateString;dateStr&&text.children.push({tagName:"time",props:{datetime:"".concat(publishDate.year.toString(10),"-").concat(publishDate.month.toString(10),"-").concat(publishDate.date.toString(10))},children:dateStr})}return result}MdBlogs.hooks={renderMd:void 0},MdBlogs.showElements=function(show,hide){show&&show.forEach(function(ele){var element=document.getElementById(ele);element&&(element.style.display="")}),hide&&hide.forEach(function(ele){var element=document.getElementById(ele);element&&(element.style.display="none")})},MdBlogs.codeElements=function(element){if(element&&("string"!=typeof element||(element=document.getElementById(element)))){var blocks=element.getElementsByTagName("pre"),arr=[];if(blocks){for(var i=0;i<blocks.length;i++){var block=blocks[i].children.length>0?blocks[i].children[0]:void 0;block&&arr.push(block)}return arr}}},MdBlogs.generateMenu=function generateMenu(arr,params,options){var _a;if(params&&!(params.length<1))for(var deep=null==options?void 0:options.deep,select=null==options?void 0:options.select,mkt=null==options?void 0:options.mkt,click=null==options?void 0:options.click,localeOptions=null!=mkt?{mkt:mkt}:void 0,level=!0===deep?1:"number"==typeof deep&&deep>=0?deep+1:0,group=void 0,i=0;i<params.length;i++){var article=params[i];if("string"!=typeof article){if(article&&article.name&&article instanceof MdBlogs.ArticleInfo){var y=null===(_a=article.dateObj)||void 0===_a?void 0:_a.year;!1===deep&&y&&y!=group&&(group=y,arr.push({tagName:"li",styleRefs:"grouping-header",children:"number"==typeof group?group.toString(10):group}));var result=generateMenuItem(article,-1===deep?-1:level,click,localeOptions);if(select===article&&(result.styleRefs="state-sel"),arr.push(result),!(level<1))generateMenu(arr,article.children(localeOptions),{select:select,mkt:mkt,deep:level})}}else arr.push({tagName:"li",styleRefs:"grouping-header",children:article})}},MdBlogs.generateMenuItem=generateMenuItem,MdBlogs.generateCdnScript=function(name,ver,url,path){if(name&&url){var s=name;return ver&&(s+="@"+ver),path?path.startsWith("/")||(path="/"+path):path="",{tagName:"div",styleRefs:"x-part-code",children:[{tagName:"code",children:[{tagName:"span",styleRefs:"x-code-pack",children:"<"},{tagName:"span",styleRefs:"x-code-tag",children:"script"},{tagName:"span",children:" "},{tagName:"span",styleRefs:"x-code-attr",children:"type"},{tagName:"span",children:"="},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",styleRefs:"x-code-string",children:"text/javascript"},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",children:" "},{tagName:"span",styleRefs:"x-code-attr",children:"src"},{tagName:"span",children:"="},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",styleRefs:"x-code-string",children:url+=s+path},{tagName:"span",styleRefs:"x-code-quote",children:'"'},{tagName:"span",styleRefs:"x-code-pack",children:" ></"},{tagName:"span",styleRefs:"x-code-tag",children:"script"},{tagName:"span",styleRefs:"x-code-pack",children:">"}]}]}}}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){var Articles=function(){function Articles(data,options){var blogConfig,path=null==options?void 0:options.path;path&&"boolean"!=typeof path||(path="./"),"string"==typeof path&&(path=new Hje.RelativePathInfo(path)),data.blog?data.blog instanceof Array?blogConfig={list:data.blog}:(blogConfig=data.blog).list||(blogConfig.list=[]):blogConfig={list:[]},this._inner={data:data||{},path:path,blogConfig:blogConfig,fetch:null==options?void 0:options.fetch}}return Object.defineProperty(Articles.prototype,"name",{get:function(){return MdBlogs.getLocaleProp(this._inner.data)},enumerable:!1,configurable:!0}),Object.defineProperty(Articles.prototype,"config",{get:function(){return this._inner.data.config||{}},enumerable:!1,configurable:!0}),Articles.prototype.blogsInfo=function(options){var _a=this._inner.blogConfig,count=_a.count,disableMenu=_a.disableMenu;return{name:MdBlogs.getLocaleProp(this._inner.blogConfig,null,options)||MdBlogs.getLocaleProp(this._inner.data,null,options),count:count,dir:MdBlogs.getLocaleProp(this._inner.blogConfig,"dir"),further:MdBlogs.getLocaleProp(this._inner.blogConfig,"further"),disableMenu:disableMenu}},Articles.prototype.getName=function(options){return MdBlogs.getLocaleProp(this._inner.data,null,options)},Articles.prototype.home=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.home&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.home;if(null!==this._inner.home){var url=MdBlogs.getLocaleProp(this._inner.data,"home",options);if(url&&"string"==typeof url)return this._inner.home=this.genInfo({name:this._inner.data.name,file:url}),this._inner.home;this._inner.home=null}},Articles.prototype.blogs=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.blogs&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.blogs;var blogInfo=this._inner.blogConfig,path=this._inner.path,fetchHandler=this._inner.fetch,localeOptions={mkt:null==options?void 0:options.mkt},dir=MdBlogs.getLocaleProp(blogInfo,"dir"),rela=dir?path.relative(dir):path,authors=this._inner.data.authors||[],list=blogInfo.list.map(function(blog){return blog&&blog.name&&!MdBlogs.getLocaleProp(blog,"disable",localeOptions)?new MdBlogs.ArticleInfo(blog,{rela:rela,year:!0,fetch:fetchHandler,authors:authors}):null}).filter(function(blog){return null!=blog&&null!=blog.dateObj&&null!=blog.getPath()});return blogInfo.reverse||list.reverse(),specificMkt||(this._inner.blogs=list),list},Articles.prototype.wiki=function(options){var specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt;if(this._inner.docs&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.docs;var docs=this._inner.data.docs||this._inner.data.wiki,store=[];if(!docs)return specificMkt||(this._inner.docs=store),store;for(var localeOptions={mkt:null==options?void 0:options.mkt},i=0;i<docs.length;i++){var item=docs[i];if(item)if("string"!=typeof item){if(item.name){var disable=MdBlogs.getLocaleProp(item,"disable",localeOptions);disable?"label"!==disable&&"header"!==disable||store.push(item):this.genInfo(item,store)}}else store.push(item)}return specificMkt||(this._inner.docs=store),store},Articles.prototype.get=function(name,options){var mkt=null==options?void 0:options.mkt;if("number"==typeof name){if(isNaN(name)||name<0)return;return this.blogs(options)[name]}var result=getArticle(this.wiki({mkt:mkt}),name,options);return result||getArticle(this.blogs({mkt:mkt}),name,options)},Articles.prototype.genInfo=function(article,list){if(article){var info=new MdBlogs.ArticleInfo(article,{rela:this._inner.path,fetch:this._inner.fetch,authors:this._inner.data.authors});return list instanceof Array&&list.push(info),info}},Articles.prototype.some=function(callback,thisArg,options){var context={index:0,thisArg:thisArg,deep:!0,options:options};return!0===someInternal(this.wiki(options),callback,context)||(context.deep=!1,!0===someInternal(this.blogs(options),callback,context))},Articles.prototype.nextArticle=function(current,options){var target,match=!1;return this.some(function(article){return match?(target=article,!0):(article===current&&(match=!0),!1)},void 0,options),target||(match&&(target=null),target)},Articles.prototype.previousArticle=function(current,options){var target,temp=null;return this.some(function(article){return article===current?(target=temp,!0):(temp=article,!1)},void 0,options),target},Articles}();function getArticle(list,name,options){for(var result,mkt=null==options?void 0:options.mkt,i=0;i<list.length;i++){var item=list[i];if(item instanceof MdBlogs.ArticleInfo){var children=item.children({mkt:mkt});if(item&&item instanceof MdBlogs.ArticleInfo){var bind={},options2={kind:bind,mkt:mkt};if(item.is(name,options2)){if("id"===bind.kind||"full"===bind.kind)return item;if(!result&&(result=item,children)){var child=getArticle(children,name,options2);if(child){if("id"===bind.kind||"full"===bind.kind)return child;result||(result=child)}}}}}}return result}function someInternal(list,callback,context){context?"number"!=typeof context.index&&(context.index=0):context={index:0};for(var i=0;i<list.length;i++){var w=list[i];if(w&&w instanceof MdBlogs.ArticleInfo){var b=void 0!==context.thisArg?callback.call(context.thisArg,w,context.index):callback(w,context.index);if(context.index++,!0===b)return!0;if(context.deep){var children=w.children(context.options);if(children&&!0===someInternal(children,callback,context))return!0}}}return!1}MdBlogs.Articles=Articles,MdBlogs.fetchArticles=function(url,fetchHandler){return __awaiter(this,void 0,void 0,function(){var json;return __generator(this,function(_a){switch(_a.label){case 0:return[4,fetch(url)];case 1:return[4,_a.sent().json()];case 2:return json=_a.sent(),[2,new Articles(json,{path:url,fetch:fetchHandler})]}})})}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){function isSamePath(test,file,dir){return"boolean"==typeof file||null==file||"string"==typeof file&&(dir+=file.toLowerCase().endsWith(".md")?file.substring(0,file.length-3):file),!(!dir||test!==dir)||!(!dir.endsWith("/")||test.endsWith("/")||dir.substring(0,dir.length-1)!==test)}var ArticleInfo=function(){function ArticleInfo(data,options){if(this._inner={rela:void 0,data:void 0,date:void 0,year:void 0,children:void 0,fetch:void 0,content:void 0,authors:void 0,author:void 0},this._inner.fetch=null==options?void 0:options.fetch,this._inner.rela=(null==options?void 0:options.rela)||new Hje.RelativePathInfo("./"),this._inner.authors=(null==options?void 0:options.authors)||[],data){var s,time;this._inner.data=data,this._inner.date=(s=data.date)instanceof Date?s:"number"==typeof s?new Date(s):s?(8===s.length?time=new Date(parseInt(s.substring(0,4)),parseInt(s.substring(4,6))-1,parseInt(s.substring(6,8))):9===s.length?time=new Date(parseInt(s.substring(0,5)),parseInt(s.substring(5,7))-1,parseInt(s.substring(7,9))):s.length>9&&s.includes("-")&&(time=new Date(s)),isNaN(time)?void 0:time):void 0;var y=null==options?void 0:options.year;if(y&&this._inner.date)if("string"==typeof y){var d=this._inner.date,group="";switch(y.toLowerCase()){case"month":case"m":group+=d.getFullYear().toString(10)+"/",d.getMonth()<9&&(group+="0"),group+=(d.getMonth()+1).toString(10);break;case"date":case"day":case"d":group+=d.getFullYear().toString(10)+"/",d.getMonth()<9&&"0",group+=(d.getMonth()+1).toString(10),d.getDate()<10&&"0",group+=d.getDate().toString(10);break;case"none":break;default:group=d.getFullYear().toString(10)}group&&(this._inner.year=group)}else this._inner.year=this._inner.date.getFullYear().toString(10)}else this._inner.data={}}return Object.defineProperty(ArticleInfo.prototype,"id",{get:function(){var _a,s=null===(_a=this._inner.data)||void 0===_a?void 0:_a.id;return"string"==typeof s&&s.length>10?s:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"name",{get:function(){return MdBlogs.getLocaleProp(this._inner.data)},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"subtitle",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"subtitle")},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"keywords",{get:function(){var _a;return(null===(_a=this._inner.data)||void 0===_a?void 0:_a.keywords)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"intro",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"intro")},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"notes",{get:function(){return MdBlogs.getLocaleProp(this._inner.data,"notes")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"author",{get:function(){if(this._inner.author)return this._inner.author;var name=this._inner.data.author;if(!name)return this._inner.author=[],this._inner.author;name instanceof Array||(name=[name]);for(var arr=[],_loop_1=function(i){var n=name[i];if(!n)return"continue";if("string"==typeof n){var authorInfo=this_1._inner.authors.find(function(a){return a.name===n||a.email===n});authorInfo?arr.push(authorInfo):arr.push({name:n})}else n.name&&arr.push(n)},this_1=this,i=0;i<name.length;i++)_loop_1(i);return this._inner.author=arr,arr},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"contentCache",{get:function(){return this._inner.content},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"dateObj",{get:function(){var date=this._inner.date;if(date){var y=date.getFullYear();if(!(y<2e3))return{year:y,month:date.getMonth()+1,date:date.getDate()}}},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"dateString",{get:function(){var date=this._inner.date;return date&&date.getFullYear()>=2e3?date.toLocaleDateString():void 0},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"location",{get:function(){return this._inner.data.location},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"end",{get:function(){var _a;return null===(_a=this._inner.data)||void 0===_a?void 0:_a.end},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"data",{get:function(){var _a;return null===(_a=this._inner.data)||void 0===_a?void 0:_a.data},enumerable:!1,configurable:!0}),Object.defineProperty(ArticleInfo.prototype,"disableMenu",{get:function(){return!this._inner.data||this._inner.data.disableMenu},enumerable:!1,configurable:!0}),ArticleInfo.prototype.getRoutePath=function(options){var data=this._inner.data,dir=this.getDirPath(options);if(data&&dir&&!(dir.length<4)){dir=dir.substring(2,dir.length-1);var file=MdBlogs.getLocaleProp(data,"file",{mkt:null==options?void 0:options.mkt});return"boolean"==typeof file||"string"==typeof file&&(dir+="/"+(file.toLowerCase().endsWith(".md")?file.substring(0,file.length-3):file)),dir.endsWith("/")&&(dir=dir.substring(0,dir.length-1)),dir}},ArticleInfo.prototype.is=function(name,options){var data=this._inner.data;if(!data||!name)return!1;if(name===this||name===data)return!0;var kind=null==options?void 0:options.kind,bind="object"==typeof kind?kind:{};if(kind?kind===bind&&(kind="auto"):kind="auto",("auto"===kind||"id"===kind)&&"string"==typeof data.id&&data.id.length>10&&data.id===name)return bind.kind="id",!0;var localeOptions={mkt:null==options?void 0:options.mkt},dirName=MdBlogs.getLocaleProp(data,"dir");if(dirName&&!dirName.endsWith("/")&&(dirName+="/"),"auto"===kind||"full"===kind){var dir=name.startsWith("/")?"/":"";if(this._inner.year&&(dir+=this._inner.year+"/"),dirName&&(dir+=dirName),isSamePath(name,data.file,dir)||isSamePath(name,MdBlogs.getLocaleProp(data,"file",localeOptions),dir))return bind.kind="full",!0}if("auto"===kind||"simple"===kind){dir=name.startsWith("/")?"/":"";if(dirName&&(dir+=dirName),isSamePath(name,data.file,dir)||isSamePath(name,MdBlogs.getLocaleProp(data,"file",localeOptions),dir))return bind.kind="simple",!0}return!1},ArticleInfo.prototype.getPath=function(options){var path=this.getDirPath(options),file=MdBlogs.getLocaleProp(this._inner.data,"file",options);if(path&&null!=file)return!0===file||void 0===file?path+="README.md":!1===file||null===file||(path+=file),this._inner.rela.relative(path)},ArticleInfo.prototype.getName=function(options){return MdBlogs.getLocaleProp(this._inner.data,null,options)},ArticleInfo.prototype.getSubtitle=function(options){return MdBlogs.getLocaleProp(this._inner.data,"subtitle",options)},ArticleInfo.prototype.getIntro=function(options){return MdBlogs.getLocaleProp(this._inner.data,"intro",options)||MdBlogs.getLocaleProp(this._inner.data,"description",options)},ArticleInfo.prototype.getNotes=function(options){return MdBlogs.getLocaleProp(this._inner.data,"notes",options)||[]},ArticleInfo.prototype.getThumb=function(kind){var pic=this._inner.data.thumb;if(pic){if("string"==typeof pic)return pic;var p=pic[kind];if(p)return p;switch(kind){case"square":return pic.common||pic.tall||pic.wide;case"common":return pic.wide||pic.square||pic.tall;case"wide":return pic.common||pic.square||pic.tall;case"tall":return pic.square||pic.common||pic.wide;default:return pic.square||pic.common||pic.tall||pic.wide}}},ArticleInfo.prototype.getContent=function(options){var _this=this;if(void 0!==this._inner.content&&!(null==options?void 0:options.reload))return Promise.resolve(this._inner.content);var path=this.getPath({mkt:null==options?void 0:options.mkt});if(!path)return Promise.reject("No path.");var result=this._inner.fetch?this._inner.fetch.call(this,path):fetch(path.value).then(function(r){return(null==r?void 0:r.ok)?r.text():r.text().then(function(s){return Promise.resolve(s)})});return result?result.then(function(r){return r&&(r=r.replace(/\(..\/..\/..\/..\//g,"(..4./").replace(/\(..\/..\/..\//g,"(..3./").replace(/\(..\/..\//g,"(..2./").replace(/\(..\//g,"("+path.relative("../").value).replace(/\(..4.\//g,"("+path.relative("../../../../").value).replace(/\(..3.\//g,"("+path.relative("../../../").value).replace(/\(..2.\//g,"("+path.relative("../../").value).replace(/\(.\//g,"("+path.relative("./").value)),_this._inner.content=r,r}):Promise.reject()},ArticleInfo.prototype.related=function(options){var _a,arr=null===(_a=this._inner.data)||void 0===_a?void 0:_a.related;return!arr||arr.length<1?[]:arr.filter(function(link){return null!=(null==link?void 0:link.name)&&!MdBlogs.getLocaleProp(link,"disable",options)}).map(function(link){return{name:MdBlogs.getLocaleProp(link,null,options),subtitle:MdBlogs.getLocaleProp(link,"subtitle",options),url:MdBlogs.getLocaleProp(link,"url",options),data:link.data}})},ArticleInfo.prototype.children=function(options){var _a,specificMkt=(null==options?void 0:options.mkt)&&!0!==options.mkt,authors=this._inner.authors;if(this._inner.children&&!(null==options?void 0:options.reload)&&!specificMkt)return this._inner.children;var arr=(null===(_a=this._inner.data)||void 0===_a?void 0:_a.children)||[],localeOptions={mkt:null==options?void 0:options.mkt},rela=this._inner.rela,fetchHandler=this._inner.fetch,list=arr.map(function(blog){return blog&&blog.name&&!MdBlogs.getLocaleProp(blog,"disable",localeOptions)?new ArticleInfo(blog,{rela:rela,year:!1,fetch:fetchHandler,authors:authors}):null}).filter(function(blog){return null!=blog&&null!=blog.getPath()});return specificMkt||(this._inner.children=list),list},ArticleInfo.prototype.toJSON=function(){return this._inner.data},ArticleInfo.prototype.getDirPath=function(options){var path="./";this._inner.year&&(path+=this._inner.year+"/");var dir=MdBlogs.getLocaleProp(this._inner.data,"dir",options);return dir&&(path+=dir,dir.endsWith("/")||(path+="/")),path},ArticleInfo}();MdBlogs.ArticleInfo=ArticleInfo}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){MdBlogs.render=function(element,data,options){var q=Hje.getQuery();options||(options={});var defaultTitle=options.title?!0===options.title?document.title:options.title:void 0,monitor={skip:!0},lifecycle={oninit:function(){monitor.skip=!1},onselect:function(instance,article){if(!monitor.skip){var path=article.getRoutePath(),title=defaultTitle||instance.title||MdBlogs.getLocaleString("blogs");history.pushState({select:path},"","?".concat(path)),document.title=title?"".concat(article.name," - ").concat(title):article.name}},onhome:function(instance){monitor.skip||(history.pushState({select:""},"",""),document.title=defaultTitle||instance.title)}},d={articles:data,lifecycle:lifecycle,banner:options.banner,supplement:options.supplement};q&&q.length>0&&("string"==typeof q[0]&&(d.select=q[0]),d.mkt=Hje.getValueFromKeyedArray(q,"mkt"));var component=Hje.render(element,{control:MdBlogs.ArticlesPart,data:d}),control=component.control();return window.addEventListener("popstate",function(ev){lifecycle.disable=!0;var path=ev.state?ev.state.select:"";if("string"==typeof path||null===path){var title=defaultTitle||control.title;if(path){var article=control.select(path);if(!article)return;document.title=title?"".concat(article.name," - ").concat(title):article.name}else control.home(),document.title=title||MdBlogs.getLocaleString("blogs")}lifecycle.disable=!1}),component}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){var en={name:"Name",refresh:"Refresh",keywords:"Keywords",status:"Status",available:"Available",timeout:"Timeout",invalid:"Invalid",article:"Article",articles:"Articles",articleMenu:"In this article",architecture:"Architecture",website:"Website",officialWebsite:"Official website",log:"Log",blog:"Blog",blogs:"Blogs",home:"Home",about:"About",game:"Game",games:"Games",video:"Video",videos:"Videos",screenshot:"Screenshot",screenshots:"Screenshots",photo:"Photo",photos:"Photos",pic:"Picture",pics:"Pictures",file:"File",files:"Files",lib:"Library",libs:"Libraries",package:"Package",packages:"Packages",tool:"Tool",tools:"Tools",book:"Book",books:"Books",comment:"Comment",comments:"Comments",docs:"Docs",search:"Search",settings:"Settings",tutorial:"Tutorial",work:"Work",works:"Works",events:"Events",seeMore:"More",learnMore:"Learn more",back:"Back",goHome:"Back to homepage",recomm:"Recommendation",ok:"OK",cancel:"Cancel",continue:"Continue",open:"Open",close:"Close",new:"New",add:"Add",modify:"Modify",remove:"Remove",delete:"Delete",on:"On",off:"Off",enable:"Enable",disable:"Disable",enabled:"Enabled",disabled:"Disabled",unknown:"Unknown",empty:"Empty",notFound:"Not found",loading:"Loading…",seeAlso:"See also",error:"Error",loadFailed:"Load failed.",renderFailed:"Render failed.",today:"Today",thisYear:"This year",top:"Top",next:"Next",previous:"Previous",projects:"Projects",archiveProjects:"Archive projects",features:"Features",installation:"Installation",sourceCode:"Source",community:"Community",link:"Link",otherLinks:"Other links",relatedLinks:"Related links",xp:"Experience",experience:"Experience",more:"More…",getDetails:"Get details"},hans={name:"名称",refresh:"刷新",keywords:"关键词",status:"状态",available:"可用",timeout:"超时",invalid:"验证错误",article:"文章",articles:"文章",articleMenu:"文章目录",architecture:"架构",website:"网站",officialWebsite:"官网",log:"日志",blog:"博客",blogs:"博客",home:"首页",about:"关于",game:"游戏",games:"游戏",video:"视频",videos:"视频",screenshot:"截图",screenshots:"截图",photo:"照片",photos:"照片",pic:"图片",pics:"图片",file:"文件",files:"文件",lib:"库",libs:"库",package:"包",packages:"包",tool:"工具",tools:"工具",book:"书",books:"书",comment:"评论",comments:"评论",docs:"文档",search:"搜索",settings:"设置",tutorial:"教程",work:"作品",works:"作品",events:"活动",seeMore:"查看更多",learnMore:"了解详情",back:"返回",goHome:"返回首页",recomm:"推荐",ok:"确定",cancel:"取消",continue:"继续",open:"打开",close:"关闭",new:"新建",add:"添加",modify:"修改",remove:"移除",delete:"删除",on:"开",off:"关",enable:"启用",disable:"禁用",enabled:"已启用",disabled:"已禁用",unknown:"未知",empty:"空",notFound:"未找到",loading:"加载中…",seeAlso:"参考",error:"错误",loadFailed:"加载失败。",renderFailed:"渲染失败。",today:"今天",thisYear:"今年",top:"返回顶部",next:"下一篇",previous:"上一篇",projects:"项目",archiveProjects:"归档项目",features:"功能",installation:"安装",sourceCode:"源码",community:"社区",link:"链接",otherLinks:"更多链接",relatedLinks:"相关链接",xp:"体验",experience:"经历",more:"更多…",getDetails:"获取详情"},obj={strings:en,"strings#en":en,"strings#zh-Hans":hans,"strings#zh-CN":hans,"strings#zh-SG":hans};function getLocaleString(key,mkt){return MdBlogs.getLocaleProp(obj,"strings",{mkt:mkt})[key]||obj.strings[key]}MdBlogs.getLocaleString=getLocaleString,MdBlogs.setElementText=function(element,key){if(key&&"string"==typeof key){var s=getLocaleString(key);return s?(element&&("string"==typeof element&&(element=document.getElementById(element)),element&&element.tagName&&(element.innerText=s)),s):s}}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),"function"==typeof define?(define.amd||"undefined"!=typeof __webpack_require__)&&define(["exports"],function(exports){return DeepX.MdBlogs}):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&(module.exports=DeepX.MdBlogs),function(DeepX){!function(MdBlogs){var ArticlesPart=function(_super){function ArticlesPart(element,options){var _a,_this=_super.call(this,element,options)||this;if(_this.__inner={},null!=(null===(_a=null==options?void 0:options.data)||void 0===_a?void 0:_a.mkt)&&(_this.__inner.mkt=options.data.mkt),_this.currentModel={children:[{key:"content",tagName:"article",children:[]},{tagName:"aside",children:[{tagName:"nav",children:[{key:"contents",tagName:"ul",styleRefs:"link-tile-compact",children:[],style:{display:"none"}},{key:"title",tagName:"h1",style:{display:"none"}},{key:"menu",tagName:"ul",styleRefs:"link-tile-compact",children:[]}]}]}]},_this.refreshChild(),!(null==options?void 0:options.data))return _this;_this.__inner.banner=options.data.banner,_this.__inner.supplement=options.data.supplement;var lifecycle=options.data.lifecycle||{disable:!0};return _this.__inner.lifecycle=lifecycle,"string"==typeof options.data.articles?MdBlogs.fetchArticles(options.data.articles).then(function(r){_this.initRender(r,options.data.select,lifecycle)}):options.data.articles instanceof MdBlogs.Articles&&_this.initRender(options.data.articles,options.data.select,lifecycle),_this}return __extends(ArticlesPart,_super),Object.defineProperty(ArticlesPart.prototype,"title",{get:function(){return this.__inner.title},set:function(value){var m=_super.prototype.childModel.call(this,"title");this.__inner.title=value;var self=this;m.children=[{tagName:"a",props:{href:"./"},on:{click:function(ev){ev.preventDefault(),self.home()}},children:value}],m.style=value?{display:""}:{display:"none"},_super.prototype.refreshChild.call(this,"title")},enumerable:!1,configurable:!0}),Object.defineProperty(ArticlesPart.prototype,"mkt",{get:function(){return this.__inner.mkt},set:function(value){this.__inner.mkt=value},enumerable:!1,configurable:!0}),ArticlesPart.prototype.home=function(){var _a,_b,already=!this.__inner.select;this.__inner.select=null;var children=[],config=this.__inner.info.config,options=this.createLocaleOptions();config.disableName||children.push({tagName:"h1",children:this.__inner.info.getName(options)}),this.__inner.banner&&children.push(this.__inner.banner);var part=this.__inner.info.home(options);part&&children.push({tagName:"main",onInit:function(c){part.contentCache?renderMd(c.element(),part.contentCache):part.getContent(options).then(function(r){renderMd(c.element(),r)})},children:part.contentCache});var menu=[];this.genMenu(menu,this.__inner.info.wiki(options),!0),this.genMenu(menu,this.__inner.info.blogs(options),!1),children.push({tagName:"main",styleRefs:"x-part-blog-menu",children:[{tagName:"ul",styleRefs:"link-tile-compact",children:menu}]}),this.__inner.supplement&&children.push(this.__inner.supplement),_super.prototype.childModel.call(this,"content",{children:children}),_super.prototype.refreshChild.call(this,"content");var articleContents=this.childModel("contents");articleContents.children=[],articleContents.style={display:"none"},_super.prototype.refreshChild.call(this,"contents"),scrollToTop(),this.refreshMenu(),already||null===(_b=null===(_a=this.lifecycle())||void 0===_a?void 0:_a.onhome)||void 0===_b||_b.call(_a,this)},ArticlesPart.prototype.select=function(article){var _a,_b,_c,_d,options=this.createLocaleOptions();if("number"==typeof article){if(-1===article)return void this.home();if(isNaN(article)||article<0)return this.__inner.select;var blogs=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.blogs(options);if(!(article=blogs[article]))return}else if("string"==typeof article){if(!article)return void this.home();if(!(article=null===(_b=this.__inner.info)||void 0===_b?void 0:_b.get(article,options)))return}if(!article||this.__inner.select===article)return this.__inner.select;var children=[],self=this;children.push({tagName:"h1",children:article.getName(options)});var infoChildren=[],author=article.author;if(author)for(var i=0;i<author.length;i++){var authorItem=author[i];infoChildren.push(authorItem.url?{tagName:"a",props:{href:authorItem.url},children:authorItem.name}:{tagName:"span",children:authorItem.name})}var publishDate=article.dateObj;if(publishDate){var dateStr=article.dateString||publishDate.year.toString(10);article.location&&(dateStr+=" "+article.location),infoChildren.push({tagName:"time",props:{datetime:"".concat(publishDate.year.toString(10),"-").concat(publishDate.month.toString(10),"-").concat(publishDate.date.toString(10))},children:dateStr})}var keywords=article.keywords,mkt=null==options?void 0:options.mkt;if(keywords instanceof Array)for(i=0;i<keywords.length;i++){var keyword=keywords[i];keyword&&("string"!=typeof keyword&&(keyword=MdBlogs.getLocaleProp(keyword,null,options)||keyword.value),keyword&&infoChildren.push({tagName:"span",children:keyword}))}infoChildren.length>0&&children.push({tagName:"section",styleRefs:"x-part-blog-note",children:infoChildren}),children.push({tagName:"main",children:[{tagName:"em",children:MdBlogs.getLocaleString("loading",mkt)}],onInit:function(c){var config=self.__inner.info.blogsInfo(options);article.getContent(options).then(function(md){var mdEle=c.element(),header1="# "+article.name+"\n";if(md.startsWith(header1)&&(md=md.substring(header1.length)),header1="# "+article.name+"\r\n",md.startsWith(header1)&&(md=md.substring(header1.length)),article.end){var endTag="\n\x3c!-- "+(!0===article.end?"End":article.end)+" --\x3e",endIndex=md.lastIndexOf(endTag);endIndex>1&&(md=md.substring(0,endIndex))}if(renderMd(c.element(),md),!article.disableMenu&&!config.disableMenu){var articleContents=self.childModel("contents");articleContents.children=[];var headers=function(container){for(var arr=[],i=0;i<container.children.length;i++){var para=container.children[i];if(para&&para.tagName){var tagName=para.tagName.toLowerCase();switch(tagName){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":arr.push(genHeadItem(para,parseInt(tagName.replace("h",""))))}}}return arr}(mdEle),levels=function(arr){if(!arr||arr.length<1)return[];for(var list=[],level=1;level<7;level++)for(var i=0;i<arr.length;i++){var item=arr[i];if(item&&item.level==level){list.push(level);break}}return list}(headers);if(!(!headers||headers.length<2||levels.length<1)){articleContents.children.push({tagName:"li",children:[{tagName:"a",props:{href:"javascript:void(0)"},on:{click:function(ev){scrollToTop()}},children:"⇮ "+MdBlogs.getLocaleString("top",mkt)}]}),1==levels.length&&levels.push(levels[0]+1);for(var i=0;i<headers.length;i++){var item=headers[i];switch(item.level){case levels[0]:articleContents.children.push(genHeadModel(item));break;case levels[1]:articleContents.children.push(genHeadModel(item,!0))}}articleContents.style={display:""},self.refreshChild("contents")}}})}});var related=[];return function(lines,children){if(!lines||!children)return;lines=lines.filter(function(n){return n})||[];for(var i=0;i<lines.length;i++){var note=lines[i];children.push({tagName:"p",children:[{tagName:"span",children:note}]})}}(article.getNotes(options),related),function(source,children,options){if(!source||!children)return;if((source=source.filter(function(n){return(null==n?void 0:n.name)&&(null==n?void 0:n.url)})).length<1)return;children.push({tagName:"h2",children:MdBlogs.getLocaleString("seeAlso",null==options?void 0:options.mkt)});var relatedItems=[];children.push({tagName:"ul",styleRefs:"link-tile-compact",children:relatedItems});for(var i=0;i<source.length;i++){var link=source[i];relatedItems.push({tagName:"li",children:[{tagName:"a",props:{href:link.url,title:link.name+(link.subtitle?"\n"+link.subtitle:"")},children:[{tagName:"span",children:link.name},{tagName:"span",children:link.subtitle}]}]})}}(article.related(options),related,options),related.length>0&&children.push({tagName:"section",styleRefs:"x-part-blog-related",children:related}),children.push({tagName:"section",styleRefs:"x-part-blog-next",children:[{tagName:"a",props:{href:"javascript:void(0)",title:MdBlogs.getLocaleString("previous",mkt)},on:{click:function(ev){ev.preventDefault(),self.previous()}},children:[{tagName:"span",children:"<"},{tagName:"span",children:MdBlogs.getLocaleString("previous",mkt)}]},{tagName:"a",props:{href:"javascript:void(0)",title:MdBlogs.getLocaleString("next",mkt)},on:{click:function(ev){ev.preventDefault(),self.next()}},children:[{tagName:"span",children:MdBlogs.getLocaleString("next",mkt)},{tagName:"span",children:">"}]}]}),_super.prototype.childModel.call(this,"content",{children:children}),_super.prototype.refreshChild.call(this,"content"),this.__inner.select=article,this.refreshMenu(),scrollToTop(),null===(_d=null===(_c=this.lifecycle())||void 0===_c?void 0:_c.onselect)||void 0===_d||_d.call(_c,this,article),article},ArticlesPart.prototype.next=function(){var _a,options=this.createLocaleOptions(),blog=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.nextArticle(this.__inner.select,options);return void 0===blog?blog:null===blog?(this.home(),blog):(this.select(blog),blog)},ArticlesPart.prototype.previous=function(){var _a,options=this.createLocaleOptions(),blog=null===(_a=this.__inner.info)||void 0===_a?void 0:_a.previousArticle(this.__inner.select,options);return void 0===blog?blog:null===blog?(this.home(),blog):(this.select(blog),blog)},ArticlesPart.prototype.initRender=function(articles,select,lifecycle){if(this.__inner.info!==articles&&articles){this.__inner.info=articles,this.title=articles.name;var article,options=this.createLocaleOptions(),m=_super.prototype.childModel.call(this,"menu"),arr=m.children;arr instanceof Array||(arr=[],m.children=arr),this.genMenu(arr,articles.wiki(options),!0),this.genMenu(arr,articles.blogs(options),!1),m.style=arr.length>0?{display:""}:{display:"none"},_super.prototype.refreshChild.call(this,"menu"),select&&(article=this.select(select)),article||this.home(),lifecycle.disable||"function"!=typeof lifecycle.oninit||lifecycle.oninit(this)}},ArticlesPart.prototype.refreshMenu=function(){var list=_super.prototype.childModel.call(this,"menu");list.children instanceof Array||(list.children=[]);for(var i=0;i<list.children.length;i++){var item=list.children[i];item.data instanceof MdBlogs.ArticleInfo&&(item.styleRefs=this.__inner.select===item.data?"state-sel":null)}_super.prototype.refreshChild.call(this,"menu")},ArticlesPart.prototype.createLocaleOptions=function(){var mkt=this.__inner.mkt;return null==mkt||!0===mkt?void 0:{mkt:mkt}},ArticlesPart.prototype.lifecycle=function(){var l=this.__inner.lifecycle;return!l||l.disable?void 0:l},ArticlesPart.prototype.genMenu=function(arr,params,deep){var _a,self=this;return MdBlogs.generateMenu(arr,params,{select:this.__inner.select,mkt:null===(_a=this.createLocaleOptions())||void 0===_a?void 0:_a.mkt,deep:deep,click:function(ev,article){ev.preventDefault(),self.select(article)}})},ArticlesPart}(Hje.BaseComponent);function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function renderMd(element,md){if("function"!=typeof MdBlogs.hooks.renderMd)try{if("object"==typeof marked&&"function"==typeof marked.parse?element.innerHTML=marked.parse(md):element.innerText=md,"object"==typeof hljs&&"function"==typeof hljs.highlightElement){var codes=MdBlogs.codeElements(element);if(codes)for(var i=0;i<codes.length;i++)hljs.highlightElement(codes[i])}}catch(ex){element.innerText=MdBlogs.getLocaleString("renderFailed")}else MdBlogs.hooks.renderMd(element,md)}function genHeadItem(ele,level){return{text:ele.innerText,level:level,scroll:function(){ele.scrollIntoView({behavior:"smooth"})}}}function genHeadModel(item,sub){var text=item.text;return sub&&(text="▹ "+text),{tagName:"li",children:[{tagName:"a",props:{href:"javascript:void(0)"},on:{click:function(ev){"function"==typeof item.scroll&&item.scroll()}},children:text}]}}MdBlogs.ArticlesPart=ArticlesPart}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={})),function(DeepX){!function(MdBlogs){function getKeyedPropValue(obj,key1,key2,options){var key=key1,v=obj[key];if(void 0===v&&key2&&(key=key2,v=obj[key2]),void 0===v)return null==options?void 0:options.fallback;var b=null==options?void 0:options.bind;return b&&(b.key=key),v}MdBlogs.setElementProp=function(element,key,value){element&&("string"==typeof element&&(element=document.getElementById(element)),element&&element.tagName&&(null==key?key=element.innerText=value:"display"===key&&"boolean"==typeof value?key=element.style.display=value?"":"none":element[key]=value))},MdBlogs.getLocaleProp=function(obj,key,options){if(!obj)return(null==options?void 0:options.fallback)||void 0;var mkt,b=(null==options?void 0:options.bind)||{};if("string"==typeof(null==options?void 0:options.mkt)&&(mkt=null==options?void 0:options.mkt),mkt||!1===(null==options?void 0:options.mkt)||"object"!=typeof navigator||(mkt=navigator.language),key||(key="name"),"string"!=typeof key)return getKeyedPropValue(obj,key,void 0,options);if(!mkt||"string"!=typeof mkt)return getKeyedPropValue(obj,key,void 0,options);var k="".concat(key,"#").concat(mkt),v=obj[k];if(void 0!==v)return b.key=k,v;var arr=mkt.split("-");if(arr.length<2)return getKeyedPropValue(obj,key,void 0,options);if(2===arr.length)return getKeyedPropValue(obj,"".concat(key,"#").concat(arr[0]),key,options);for(var special="".concat(key,"#").concat(arr[0],"-").concat(arr[2]);arr.length>2;){arr.pop(),k="";for(var j=0;j<arr.length;j++)(v=arr[j])&&(k&&(k+="-"),k+=v);if(void 0!==(v=obj["".concat(key,"#").concat(k)]))return v}return void 0!==(v=obj[special])?(b.key=special,v):getKeyedPropValue(obj,"".concat(key,"#").concat(arr[0]),key,options)}}(DeepX.MdBlogs||(DeepX.MdBlogs={}))}(DeepX||(DeepX={}));